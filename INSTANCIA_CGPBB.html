<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GIS Proyecto Agua</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <style>
  
	html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    overflow: hidden; /* Evita que aparezca el scroll */
	}
	
    #map {
      height: 100vh;  /* El mapa ocupará toda la altura de la ventana */
    }

    .leaflet-tooltip {
      background-color: rgba(255, 255, 255, 0.8);
      border-radius: 5px;
      padding: 8px;
      font-size: 14px;
      font-family: Arial, sans-serif;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
    }

    .leaflet-tooltip b {
      font-weight: bold;
    }

    /* Estilos para la lista de plantas */
    #plant-list {
      position: absolute;
      top: 100px;  /* Mueve el panel hacia abajo (ajusta el valor según sea necesario) */
      left: 10px;
      background-color: rgba(255, 255, 255, 0.3); 
	/*  background-color: #c4e334;  */
      border-radius: 5px;
      max-height: 400px;
	  margin-top: 20px;
	  flex-direction: column;
	  gap: 10px;	  
      overflow-y: auto;
      font-family: Arial, sans-serif;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
      z-index: 1000;
	  width: 13%; /* Asegura que todos los botones tengan el mismo ancho */
	  padding: 10px; /* Espaciado interno */

	  display: none;
    }

    .plant-item {
      cursor: pointer;
      padding: 5px;
      margin: 5px 0;
	  font-size: 1em; /* Tamaño del texto */	  
      background-color: #f1f1f1;  
	/*   background-color: #88e99a;  */
      border-radius: 3px;
    }

    .plant-item:hover {
      background-color: #ddd; 
	/*  background-color: #88e99a; */
    }

    .toggle-visibility {
      margin-left: 10px;
      cursor: pointer;
      color: #007bff;
    }

	button.active {
 /*	  background-color: #007bff;  */
	  background-color: #007d8e;
	  color: white;               
/*	  border: 1px solid #0056b3;  */
	  border: 1px solid #152544;
	  font-weight: bold;    
	  width: 100%
	}	
	
	button:not(.active) {
	  width: 100%
	}
	
	.small-marker {
		width: 1px;  /* Ancho del punto */
		height: 1px; /* Alto del punto */
		background-color: #152544;  /* Color del punto */
		border-radius: 50%;  /* Redondear para hacer un círculo */
		border: 1px solid white;  /* Opcional: agregar un borde */
		display: inline-block;
	}	
	
	
	
    /* Estilos para la lista de plantas */
    #boton-de-descarga {
      position: absolute;
	  
	  bottom: 5px; /* Ajusta esta propiedad para posicionarlo sobre la atribución de Leaflet */
	  right: 5px;  /* Ajusta esta propiedad si prefieres que esté alineado a la derecha */
      background-color: rgba(0, 0, 0, 0.0) !important;
	  border: none;
      padding: 10px;
      border-radius: 5px;
      max-height: 400px;
      overflow-y: auto;
      font-family: Arial, sans-serif;
      box-shadow: none ;
      z-index: 1000;
      width: 170px; /* Tamaño del panel */
	  height: 70px;
	  display: none;
    }	
	
	
    /* Estilos del botón de descarga */
    #download-button {
      margin-top: 20px;
      padding: 10px;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    #download-button:hover {
      background-color: #45a049;
    }
	
	
	
	#toggle-panel {
	  position: absolute;
	  top: 0px;
	  right: 0px;
	  background-color: #007d8e;
	  color: white;
	  border: none;
	  border-radius: 3px;
	  padding: 5px 10px;
	  cursor: pointer;
	  z-index: 1001;
	}

	#plant-list.minimized {
	  max-height: 10px; /* Altura cuando está minimizado */
	  overflow: hidden;
	  padding: 20px 10px;
	  transition: max-height 0.3s ease-in-out;
	}

	#plant-list.minimized #plant-entries,
	#plant-list.minimized h3 {
	  display: none; /* Ocultar contenido cuando está minimizado */
	}
	
	
	/* Excepción para el botón de minimizar */
	button.minimize-btn {
	  width: auto; /* Conserva el tamaño original */
	  cursor: pointer; /* Cursor normal, ya que es funcional */
	  background-color: inherit; /* Hereda el color de fondo por defecto */
	  border: none; /* Sin borde adicional */
	  color: inherit; /* Hereda el color del texto */
	}	
	
	
	#portada {
	  display: flex;
	  justify-content: center;
	  align-items: center;
	  height: 100vh;
	  overflow: hidden;  /* Para asegurarnos que la imagen de fondo no cause desplazamiento */
	  position: relative; /* Asegura que el contenido se mantenga sobre la imagen */
	}

	#portada::before {
	  content: "";
	  position: absolute;
	  top: 0;
	  left: 0;
	  width: 100vw; /* Ancho completo de la ventana */
	  height: 100vh; /* Alto completo de la ventana */
	  background-image: url('https://raw.githubusercontent.com/ramosmatiashernan/ProyectoAgua/refs/heads/master/Portada/fondo-gis-letras.png');
	  background-size: 100% 100%; /* Estira la imagen para cubrir todo sin recortar */
	  background-position: center; /* Centra la imagen */
	  background-repeat: no-repeat; /* No repite la imagen */
	  z-index: -1;
	}
	
	#titulo-portada h1 {
	  font-family: 'Roboto', Arial, sans-serif; /* Fuente más moderna y profesional */
	  font-size: 3.5em; /* Un poco más grande para más impacto */
	  color: #007d8e; /* El color verde que te gusta */
	  font-weight: 700; /* Negrita para darle presencia */
	  text-align: center; /* Alineado al centro */
	  letter-spacing: 3px; /* Un poco de espaciado entre letras para darle elegancia */
	  text-transform: uppercase; /* Todo en mayúsculas para mayor formalidad */
	  line-height: 1.2; /* Mejorar la altura de línea para una lectura más fluida */
	  text-shadow: 2px 2px 6px rgba(0, 0, 0, 0.3); /* Sombra suave para resaltar */
	  z-index: 1; /* Asegura que el título esté por encima de la imagen */
	}
	
	#boton-ingresar {
	  position: fixed; /* Mantiene el botón fijo en el viewport */
	  bottom: 19.5%; /* Ajusta la posición desde el borde inferior */
	  left: 50%; /* Centra horizontalmente */
	  transform: translateX(-50%); /* Centra perfectamente el botón */
	  display: flex; /* Centra el contenido dentro del contenedor */
	  justify-content: center;
	  align-items: center;
	  z-index: 1; /* Asegura que esté por encima del resto del contenido */
	}

	#boton-ingresar button {
	  padding: 20px 40px; /* Espaciado interno */
	  font-size: 2.0em; /* Tamaño del texto */
	  background-color: #44d6e2; /* Color de fondo */
	  color: #152544; /* Color del texto */
	  border: none; /* Elimina el borde */
	  border-radius: 50px; /* Esquinas redondeadas tipo píldora */
	  cursor: pointer;
	  margin-top: 690px;
	  text-transform: uppercase; /* Texto en mayúsculas */
	  font-weight: bold; /* Texto más grueso */
	}

	#boton-ingresar button:hover {
	  background-color: #007d8e; /* Cambio de color al pasar el mouse */
	  color: #44d6e2; /* Color de texto inverso */
	  opacity: 0.9;
	}

	/* Estilo para el mapa */
	#map {
	  visibility: hidden;  /* Inicialmente oculto */
	  opacity: 0;
	  transition: opacity 0.5s ease, visibility 0s linear 0.5s;  /* Transición suave */
	  height: 100vh;
	}

	/* Hacer visible el mapa cuando se ingrese */
	#map.visible {
	  visibility: visible;
	  opacity: 1;
	  transition: opacity 0.5s ease;
	}	
	
	#subpanel-Sistema-abastecimiento h4 {
	  text-align: center; /* Centra el texto horizontalmente */
	  margin: 0.01;          /* Opcional: elimina márgenes si los hubiera */
	}	

	#subpanel-Otras-Cuencas h4 {
	  text-align: center; /* Centra el texto horizontalmente */
	  margin: 0.01;          /* Opcional: elimina márgenes si los hubiera */
	}
	
	#subpanel-Agua-Subterranea h4 {
	  text-align: center; /* Centra el texto horizontalmente */
	  margin: 0.01;          /* Opcional: elimina márgenes si los hubiera */
	}	
	
	#subpanel-Agua-Subterranea-Empresas h4 {
	  text-align: center; /* Centra el texto horizontalmente */
	  margin: 0.01;          /* Opcional: elimina márgenes si los hubiera */
	}

	#subpanel-Pluvial h4 {
	  text-align: center; /* Centra el texto horizontalmente */
	  margin: 0.01;          /* Opcional: elimina márgenes si los hubiera */
	}
	
	#subpanel-Reuso h4 {
	  text-align: center; /* Centra el texto horizontalmente */
	  margin: 0.01;          /* Opcional: elimina márgenes si los hubiera */
	}	
	
  </style>
</head>
<body>

  <!-- Portada (Pantalla de inicio) -->
  <div id="portada" style="display: none;">
    <!--
	<div id="titulo-portada">
      <h1>GIS <br> INVENTARIO DE AGUA PARA USO INDUSTRIAL</h1>
    </div>
	-->
    <div id="boton-ingresar">
      <button onclick="ingresar()">INGRESAR</button>
    </div>
  </div>

  <div id="map"></div>

<!--  
<div id="boton-de-descarga">
  <button id="download-button">Descargar Datos (CSV)</button>
</div>
--> 
 
 
<div id="plant-list">

	<button id="toggle-Sistema-abastecimiento" onclick="toggleSistemaAbastecimiento()">Sistema de Abastecimiento Actual</button>
	<!-- Subpanel de los botones de los marcadores (inicialmente oculto) -->
    <div id="subpanel-Sistema-abastecimiento" style="display: none; margin-top: 10px; border: 1px solid #ccc; padding: 10px;">
        <h4>Sistema de Abastecimiento Actual</h4>
        <!-- Aquí se agregarán los botones de los marcadores de forma dinámica -->
        <button id="acueductos-button" onclick="toggleAcueductos()">Acueductos</button>
		<button id="toggle-Agua-Subterranea-Pozos" onclick="toggleSubterraneaPozos()">Pozos Cabildo</button>
		<button id="toggle-Agua-Subterranea-Pozos2" onclick="toggleSubterraneaPozos2()">Pozos Bajo San José</button>
    </div>	

		<button id="toggle-Otras-Cuencas" onclick="toggleOtrasCuencas()">Cuencas</button> <!-- Nuevo botón -->
	<!-- Subpanel de los botones de los marcadores (inicialmente oculto) -->
    <div id="subpanel-Otras-Cuencas" style="display: none; margin-top: 10px; border: 1px solid #ccc; padding: 10px;">
        <h4>Marcadores</h4>
        <!-- Aquí se agregarán los botones de los marcadores de forma dinámica -->
    </div>	

	<button id="toggle-Agua-Subterranea" onclick="toggleAguaSubterranea()">Agua Subterránea</button>
	<!-- Subpanel de los botones de los marcadores (inicialmente oculto) -->
    <div id="subpanel-Agua-Subterranea" style="display: none; margin-top: 10px; border: 1px solid #ccc; padding: 10px;">
        <h4>Agua Subterránea</h4>
        <!-- Aquí se agregarán los botones de los marcadores de forma dinámica -->
		<button id="toggle-Agua-Subterranea-Pozos3" onclick="toggleSubterraneaPozos3()">Pozos Cabildo</button>
		<button id="toggle-Agua-Subterranea-Pozos4" onclick="toggleSubterraneaPozos4()">Pozos Bajo San José</button>

		<button id="toggle-Agua-Subterranea-Empresas" onclick="toggleSubterraneaEmpresas()">Empresas</button>
		<div id="subpanel-Agua-Subterranea-Empresas" style="display: none; margin-top: 10px; border: 1px solid #ccc; padding: 10px;">
			<h4>Empresas</h4>
			<!-- Aquí se agregarán los botones de los marcadores de forma dinámica -->
		</div>

		<button id="toggle-Agua-Subterranea-Acuiferos" onclick="toggleAguaSubterraneaAcuiferos()">Acuíferos</button>
		<div id="subpanel-Agua-Subterranea-Acuiferos" style="display: none; margin-top: 10px; border: 1px solid #ccc; padding: 10px;">
			<h4>Acuíferos</h4>
			<!-- Aquí se agregarán los botones de los marcadores de forma dinámica -->
		</div>			
    </div>

    <button id="toggle-convex-hulls" onclick="toggleConvexHulls()">Reúso</button> <!-- Nuevo botón -->
	<!-- Subpanel de los botones de los marcadores (inicialmente oculto) -->
    <div id="subpanel-Reuso" style="display: none; margin-top: 10px; border: 1px solid #ccc; padding: 10px;">
        <!--<h4>Marcadores</h4>-->
        <!-- Aquí se agregarán los botones de los marcadores de forma dinámica -->
    </div>	
	
	<button id="toggle-Pluvial" onclick="togglePluvial()">Agua de Lluvia</button>
	<!-- Subpanel de los botones de los marcadores (inicialmente oculto) -->
    <div id="subpanel-Pluvial" style="display: none; margin-top: 10px; border: 1px solid #ccc; padding: 10px;">
        <h4>Empresas</h4>
        <!-- Aquí se agregarán los botones de los marcadores de forma dinámica -->
    </div>	

    <button id="Agua-Marina" onclick="toggleAguaMarina()">Agua Marina</button> <!-- Nuevo botón -->
	
    <button class="minimize-btn" id="toggle-panel" onclick="togglePanel()">-</button> <!-- Botón de minimizar/maximizar -->
 <!--   <h3>Capas</h3>  -->
    <div id="plant-entries"></div>
<!--
	<button id="btn-Actual" onclick="toggleMarkers()">Actual</button>
	<!-- Subpanel de los botones de los marcadores (inicialmente oculto) -->
 <!--   <div id="subpanel" style="display: none; margin-top: 10px; border: 1px solid #ccc; padding: 10px;">
        <h4>Marcadores</h4>
        <!-- Aquí se agregarán los botones de los marcadores de forma dinámica -->
  <!--   </div>
	 -->
</div>
  
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script>
    var map = L.map('map').setView([-38.7044, -62.2108], 10);

    var esriSatellite = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
      attribution: '&copy; <a href="https://www.esri.com/">ESRI</a>'
    });

    var esriStandard = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}', {
      attribution: '&copy; <a href="https://www.esri.com/">ESRI</a>'
    });

    var esriTopographic = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}', {
      attribution: '&copy; <a href="https://www.esri.com/">ESRI</a>'
    });

	// Añadir el cuarto mapa: OpenStreetMap
	var openStreetMap = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
	  attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
	});

	// Añadir el mapa de Humanitarian OpenStreetMap (HOT)
	var hotOSM = L.tileLayer('https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png', {
	  attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Tiles courtesy of <a href="https://www.hotosm.org/" target="_blank">Humanitarian OpenStreetMap Team</a>'
	});
	

    openStreetMap.addTo(map);

/*
	  // Manejador de evento para mostrar las coordenadas al hacer clic
	 map.on('click', function(e) {
		var lat = e.latlng.lat.toFixed(6); // Redondeo opcional
		var lng = e.latlng.lng.toFixed(6);

		// Verifica si el div existe y muestra las coordenadas
		var coordenadasDiv = document.getElementById('coordenadas');
		if (coordenadasDiv) {
		  coordenadasDiv.innerHTML = "Latitud: " + lat + "<br>Longitud: " + lng;
		} else {
		  alert("Latitud: " + lat + ", Longitud: " + lng); // Alert temporal
		}

		// También puedes usar un input para copiar fácilmente
		var inputCoordenadas = document.getElementById('coordenadas-input');
		if (inputCoordenadas) {
		  inputCoordenadas.value = "Latitud: " + lat + ", Longitud: " + lng;
		}
	  });	
*/
	
	var customIcon = L.icon({
		iconUrl: 'https://raw.githubusercontent.com/ramosmatiashernan/ProyectoAgua/refs/heads/master/Marcadores/marker-icon-9654e5.png', // Ruta del ícono con tu color personalizado
		shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png', // Sombra original
		iconSize: [25, 41],
		iconAnchor: [12, 41],
		popupAnchor: [1, -34]
	});
	
	
	var contador1 = 0;
	var contador2 = 0;
	
    var puntos = [
      { "Nombre": "Planta Potabilizadora Patagonia", "Latitud": -38.7044, "Longitud": -62.2108 },
      { "Nombre": "Planta Potabilizadora Grünbein", "Latitud": -38.75089687, "Longitud": -62.11355741 },
      { "Nombre": "Planta Depuradora de Líquidos Primera Cuenca", "Latitud": -38.76623389, "Longitud": -62.22766558 },
      { "Nombre": "Planta Depuradora Tercera Cuenca", "Latitud": -38.71261139, "Longitud": -62.34359171 },
	  { "Nombre": "Embalse Dique Paso de las Piedras", "Latitud": -38.38403752, "Longitud": -61.75976888 },
	  { "Nombre": "Toma Paraje Mirasoles", "Latitud": -38.668450, "Longitud": -62.120709 },
	  { "Nombre": "Toma Empleados de Comercio", "Latitud": -38.678218, "Longitud": -62.168242 },
    ];

    var puntos_agua_subterranea_empresas = [
      { "Nombre": "UNIPAR", "Latitud": -38.77803811546216, "Longitud": -62.287739636009086, "Caudal_de_agua_subterránea": "650", "Conductividad": "1.101" },
      { "Nombre": "TGS CERRI", "Latitud": -38.687842707935516, "Longitud": -62.39214194385815, "Caudal_de_agua_subterránea": "2.260" , "Conductividad": "1.021-5.080 (media=2.777)" }
    ];



/*
    var puntos_acuifero_principal = [
        {"Nombre": "1", "Latitud": -38.419458, "Longitud": -61.763070 },
        {"Nombre": "2", "Latitud": -38.435057, "Longitud": -61.790536 },
		{"Nombre": "3", "Latitud": -38.439360, "Longitud": -61.791222 },
		{"Nombre": "4", "Latitud": -38.453880, "Longitud": -61.794827 },		
		{"Nombre": "5", "Latitud": -38.508430, "Longitud": -61.823097 },		
		{"Nombre": "6", "Latitud": -38.551764, "Longitud": -61.840408 },		
		{"Nombre": "7", "Latitud": -38.575466, "Longitud": -61.860184 },		
		{"Nombre": "8", "Latitud": -38.607701, "Longitud": -61.899748 },		
		{"Nombre": "9", "Latitud": -38.620366, "Longitud": -61.920372 },		
		{"Nombre": "10", "Latitud": -38.642969, "Longitud": -61.944828 },		
		{"Nombre": "11", "Latitud": -38.668011, "Longitud": -62.005709 },		
		{"Nombre": "12", "Latitud": -38.675011, "Longitud": -62.032071 },		
		{"Nombre": "13", "Latitud": -38.700964, "Longitud": -62.097774 },
		{"Nombre": "14", "Latitud": -38.698627, "Longitud": -62.167582 },
		{"Nombre": "15", "Latitud": -38.704485, "Longitud": -62.211018 }		
    ];	
*/
    var puntos_acuifero_principal = [
        {"Nombre": "1", "Latitud": -38.419458, "Longitud": -61.763070 },
        {"Nombre": "2", "Latitud": -38.435057, "Longitud": -61.790536 },
		{"Nombre": "3", "Latitud": -38.439360, "Longitud": -61.791222 },
		{"Nombre": "4", "Latitud": -38.453880, "Longitud": -61.794827 },		
		{"Nombre": "5", "Latitud": -38.508430, "Longitud": -61.823097 },		
		{"Nombre": "6", "Latitud": -38.551764, "Longitud": -61.840408 },		
		{"Nombre": "7", "Latitud": -38.575466, "Longitud": -61.860184 },		
		{"Nombre": "8", "Latitud": -38.607701, "Longitud": -61.899748 },		
		{"Nombre": "9", "Latitud": -38.620366, "Longitud": -61.920372 },		
		{"Nombre": "10", "Latitud": -38.642969, "Longitud": -61.944828 },		
//		{"Nombre": "11", "Latitud": -38.668011, "Longitud": -62.005709 },		

		{"Nombre": "11", "Latitud": -38.669295, "Longitud": -61.998357 }, // tore 6
		{"Nombre": "12", "Latitud": -38.676951, "Longitud": -62.041803 }, // tore 7
		{"Nombre": "13", "Latitud": -38.686940, "Longitud": -62.098953 }, // tore 8
		{"Nombre": "14", "Latitud": -38.696896, "Longitud": -62.156075 }, // tore 9
		{"Nombre": "15", "Latitud": -38.704485, "Longitud": -62.211018 }		
    ];
	
    var puntos_acuifero_principal_a_cabildo = [
        {"Nombre": "1", "Latitud": -38.516780, "Longitud": -61.851053 },
        {"Nombre": "2", "Latitud": -38.484055, "Longitud": -61.895381 },
		{"Nombre": "3", "Latitud": -38.484498, "Longitud": -61.895856 },
		{"Nombre": "4", "Latitud": -38.484038, "Longitud": -61.897732 }
    ];		
	
    var puntos_acuifero_principal_derivacion_Grünbein = [
        {"Nombre": "1", "Latitud": -38.664918, "Longitud": -62.069158 },
		{"Nombre": "2", "Latitud": -38.713938, "Longitud": -62.062034 },
		{"Nombre": "3", "Latitud": -38.749824, "Longitud": -62.113486 },
		{"Nombre": "4", "Latitud": -38.750772, "Longitud": -62.114719 }
    ];		
	
    var puntos_acuifero_principal_a_toma_marisoles = [
        {"Nombre": "1", "Latitud": -38.669295, "Longitud": -61.998357},
		{"Nombre": "2", "Latitud": -38.674454, "Longitud": -62.042284 },
		{"Nombre": "3", "Latitud": -38.668450, "Longitud": -62.120709 }
    ];		

    var puntos_acuifero_principal_a_toma_marisoles2 = [
        {"Nombre": "1", "Latitud": -38.75089687, "Longitud": -62.11355741 },
		{"Nombre": "2", "Latitud": -38.668450, "Longitud": -62.120709 }
    ];	
	
    var puntos_acuifero_principal_a_toma_empleado_de_comercios = [
		{"Nombre": "1", "Latitud": -38.704324, "Longitud": -62.211937 },
		{"Nombre": "2", "Latitud": -38.684779, "Longitud": -62.188184 },
		{"Nombre": "3", "Latitud": -38.678218, "Longitud": -62.168242 }
    ];	

/*
    var puntos_Otras_Cuencas = [
		{ "Nombre": "Toma Paraje Mirasoles", "Latitud": -38.668450, "Longitud": -62.120709, "Caudal": "21.600" },
		{ "Nombre": "Toma Empleados de Comercio", "Latitud": -38.678218, "Longitud": -62.168242, "Caudal": "14.400" },
		{ "Nombre": "Puente Canessa", "Latitud": -38.590696, "Longitud": -62.087676, "Caudal": "40.300" }
    ];	
*/	
    var puntos_Plantas_pri_sec_cuenca = [
		{ "Nombre": "Planta Depuradora de Líquidos Cloacales Primera Cuenca", "Latitud": -38.76623389, "Longitud": -62.22766558, "Caudal": "84.000" },
		{ "Nombre": "Planta Depuradora de Líquidos Cloacales Tercera Cuenca", "Latitud": -38.71261139, "Longitud": -62.34359171, "Caudal": "12.000" },
    ];

	var Plantas_pri_sec_cuencaMarkers = {}; // Objeto para guardar los marcadores
	var Plantas_pri_sec_cuencaVisible = false; // Estado de visibilidad inicial


	// Crear marcadores y almacenarlos, pero no agregarlos al mapa de inmediato
	puntos_Plantas_pri_sec_cuenca.forEach(function(punto) {
	  var marker = L.marker([punto.Latitud, punto.Longitud], { icon: customIcon })
//		.bindPopup("<b>" + punto.Nombre + "</b><br>" + "Latitud: " + punto.Latitud + "<br>" + "Longitud: " + punto.Longitud);
		.bindPopup("<b>" + punto.Nombre + "</b><br>" + "Caudal de diseño (m<sup>3</sup>/d): " + punto.Caudal);
		
	  // Guardar el marcador en un objeto para futura interacción
	  Plantas_pri_sec_cuencaMarkers[punto.Nombre] = marker;

	  // Mostrar la información al pasar el mouse (hover)
	  marker.on('mouseover', function() {
		marker.openPopup();
	  });

	  // Comportamiento al hacer click para mantener el pop-up abierto
	  marker.on('click', function() {
		if (marker.isPopupOpen()) {
		  marker.closePopup();
		} else {
		  marker.openPopup();
		}
	  });
	});


	
	var OtrasCuencasMarkers = {}; // Objeto para guardar los marcadores
	var OtrasCuencasmarkersVisible = false; // Estado de visibilidad inicial

    var puntos_Otras_Cuencas = [
//		{ "Nombre": "Toma Paraje Mirasoles", "Latitud": -38.668450, "Longitud": -62.120709, "Caudal": "21.600" },
//		{ "Nombre": "Toma Empleados de Comercio", "Latitud": -38.678218, "Longitud": -62.168242, "Caudal": "14.400" },
		{ "Nombre": "Puente Canessa", "Latitud": -38.590696, "Longitud": -62.087676, "Caudal": "40.300", "Turbidez": "12" },
		
		{"Nombre": "Río Colorado (Naciente)", "Latitud": -36.871528, "Longitud": -69.759694 },
		{"Nombre": "Río Colorado (Desembocadura)", "Latitud": -39.696028, "Longitud": -62.096222, "Caudal": "172.800", "Conductividad": "1.487" },
		
		{"Nombre": "Río Sauce Grande (Naciente)", "Latitud": -38.045683, "Longitud": -61.865431, "Caudal": "40.300" },
		{"Nombre": "Río Sauce Grande (Desembocadura)", "Latitud": -38.990833, "Longitud": -61.114444, "Caudal": "40.300" },
		
		{"Nombre": "Río Negro (Naciente)", "Latitud": -38.994915, "Longitud": -67.991502, "Caudal": "40.300" },
		{"Nombre": "Río Negro (Desembocadura)", "Latitud": -41.027386, "Longitud": -62.784722, "Caudal": "432.000", "Conductividad": "284" },

		{"Nombre": "Río Sauce Chico (Naciente)", "Latitud": -37.943184, "Longitud": -62.108638, "Caudal": "40.300" },
		{"Nombre": "Río Sauce Chico (Desembocadura)", "Latitud": -38.741183, "Longitud": -62.442542, "Caudal": "77.034", "Conductividad": "1.410" },

		{"Nombre": "Arroyo Napostá Grande (Naciente)", "Latitud": -38.128713, "Longitud": -61.970909, "Caudal": "40.300" },
		{"Nombre": "Arroyo Napostá Grande (Desembocadura)", "Latitud": -38.799382, "Longitud": -62.237859, "Caudal": "40.300" },	

		{"Nombre": "Estuario de Bahía Blanca", "Latitud": -38.825797, "Longitud": -62.259493, "Caudal": "40.300" },		
    ];	
	
	// Crear marcadores y almacenarlos, pero no agregarlos al mapa de inmediato
	puntos_Otras_Cuencas.forEach(function(punto) {
		if (punto.Nombre == "Toma Paraje Mirasoles" || punto.Nombre == "Toma Empleados de Comercio") {
		  var marker = L.marker([punto.Latitud, punto.Longitud], { icon: customIcon })
	//		.bindPopup("<b>" + punto.Nombre + "</b><br>" + "Latitud: " + punto.Latitud + "<br>" + "Longitud: " + punto.Longitud);
			.bindPopup("<b>" + punto.Nombre + "</b><br>" + "Caudal disponible (m<sup>3</sup>/d): " + punto.Caudal);
		} else if (punto.Nombre == "Puente Canessa") {
		  var marker = L.marker([punto.Latitud, punto.Longitud], { icon: customIcon })
	//		.bindPopup("<b>" + punto.Nombre + "</b><br>" + "Latitud: " + punto.Latitud + "<br>" + "Longitud: " + punto.Longitud);
			.bindPopup("<b>" + punto.Nombre + "</b><br>" + "Caudal potencialmente disponible (m<sup>3</sup>/d): " + punto.Caudal + "</b><br>" + "Turbidez (NTU): " + punto.Turbidez);		
		} else if (punto.Nombre == "Río Colorado (Desembocadura)") {
		  var marker = L.marker([punto.Latitud, punto.Longitud], { icon: customIcon })
	//		.bindPopup("<b>" + punto.Nombre + "</b><br>" + "Latitud: " + punto.Latitud + "<br>" + "Longitud: " + punto.Longitud);
			.bindPopup("<b>" + punto.Nombre + "</b><br>" + "Caudal potencialmente disponible (m<sup>3</sup>/d): " + punto.Caudal + "</b><br>" + "Conductividad (μS/cm): " + punto.Conductividad);		
		} else if (punto.Nombre == "Río Negro (Desembocadura)") {
		  var marker = L.marker([punto.Latitud, punto.Longitud], { icon: customIcon })
	//		.bindPopup("<b>" + punto.Nombre + "</b><br>" + "Latitud: " + punto.Latitud + "<br>" + "Longitud: " + punto.Longitud);
			.bindPopup("<b>" + punto.Nombre + "</b><br>" + "Caudal potencialmente disponible (m<sup>3</sup>/d): " + punto.Caudal + "</b><br>" + "Conductividad (μS/cm): " + punto.Conductividad);		
		} else if (punto.Nombre == "Río Sauce Chico (Desembocadura)") {
		  var marker = L.marker([punto.Latitud, punto.Longitud], { icon: customIcon })
	//		.bindPopup("<b>" + punto.Nombre + "</b><br>" + "Latitud: " + punto.Latitud + "<br>" + "Longitud: " + punto.Longitud);
			.bindPopup("<b>" + punto.Nombre + "</b><br>" + "Caudal potencialmente disponible (m<sup>3</sup>/d): " + punto.Caudal + "</b><br>" + "Conductividad (μS/cm): " + punto.Conductividad);		
		} else {
		  var marker = L.marker([punto.Latitud, punto.Longitud], { icon: customIcon })
	//		.bindPopup("<b>" + punto.Nombre + "</b><br>" + "Latitud: " + punto.Latitud + "<br>" + "Longitud: " + punto.Longitud);
			.bindPopup("<b>" + punto.Nombre);				
		}
	  // Guardar el marcador en un objeto para futura interacción
	  OtrasCuencasMarkers[punto.Nombre] = marker;

	  // Mostrar la información al pasar el mouse (hover)
	  marker.on('mouseover', function() {
		marker.openPopup();
	  });

	  // Comportamiento al hacer click para mantener el pop-up abierto
	  marker.on('click', function() {
		if (marker.isPopupOpen()) {
		  marker.closePopup();
		} else {
		  marker.openPopup();
		}
	  });
	});


    var puntos_Agua_Submarina = [
		{ "Nombre": "Desalinización de Agua", "Latitud": -38.995530, "Longitud": -61.613768},
	];
	
	var AguaMarinaMarkers = {};
	var AguaSubmarinaMarkersVisible	= false;	
	
	// Crear marcadores y almacenarlos, pero no agregarlos al mapa de inmediato
	puntos_Agua_Submarina.forEach(function(punto) {
		var marker = L.marker([punto.Latitud, punto.Longitud], { icon: customIcon })
	//		.bindPopup("<b>" + punto.Nombre + "</b><br>" + "Latitud: " + punto.Latitud + "<br>" + "Longitud: " + punto.Longitud);
			.bindPopup("<b>" + punto.Nombre);
	  // Guardar el marcador en un objeto para futura interacción
	  AguaMarinaMarkers[punto.Nombre] = marker;

	  // Mostrar la información al pasar el mouse (hover)
	  marker.on('mouseover', function() {
		marker.openPopup();
	  });

	  // Comportamiento al hacer click para mantener el pop-up abierto
	  marker.on('click', function() {
		if (marker.isPopupOpen()) {
		  marker.closePopup();
		} else {
		  marker.openPopup();
		}
	  });
	});	
	
	
    function toggleAguaMarina() {
	  var btnAguaMarina = document.getElementById("Agua-Marina");

	  if (AguaSubmarinaMarkersVisible) {
		  btnAguaMarina.classList.remove("active");  // Remover la clase 'active'
		  btnAguaMarina.classList.add("nonactive");  // Añadir la clase 'nonactive'	
		// Si los marcadores están visibles, eliminarlos del mapa
		for (var nombre in AguaMarinaMarkers) {
		  if (AguaMarinaMarkers.hasOwnProperty(nombre)) {	  
			map.removeLayer(AguaMarinaMarkers[nombre]);
		  }
		}

	  } else {
	    
		map.flyTo([-38.995530, -61.613768], 13, {
		animate: true,
		duration: 2.0
		}); // Ajusta el nivel de zoom según sea necesario	 
		
	    btnAguaMarina.classList.toggle("active");
		// Si los marcadores están ocultos, agregarlos al mapa
		for (var nombre in AguaMarinaMarkers) {
		  if (AguaMarinaMarkers.hasOwnProperty(nombre)) {
			AguaMarinaMarkers[nombre].addTo(map);
		  }
		}}
	AguaSubmarinaMarkersVisible = !AguaSubmarinaMarkersVisible;	
	}
	  
	
	
    var puntos_Sistema_de_Abastecimiento_Actual = [

	{"PuntosSistemaAbastecimientoMarkersVisible": true, "Nombre": "Acueducto Principal", "Latitud": -38.435438, "Longitud": -61.790371},

	{"PuntosSistemaAbastecimientoMarkersVisible": true,  "Nombre": "Planta Potabilizadora Patagonia", "Latitud": -38.7044, "Longitud": -62.2108, "Caudal": "192.000" },

      {"PuntosSistemaAbastecimientoMarkersVisible": true,  "Nombre": "Planta Potabilizadora Modular", "Latitud": -38.704903, "Longitud": -62.211027, "Caudal": "28.800" },
	  
      {"PuntosSistemaAbastecimientoMarkersVisible": true,  "Nombre": "Planta Potabilizadora Grünbein", "Latitud": -38.75089687, "Longitud": -62.11355741, "Caudal": "48.000" },
	  
//      { "Nombre": "Planta Depuradora de Líquidos Primera Cuenca", "Latitud": -38.76623389, "Longitud": -62.22766558 },
//      { "Nombre": "Planta Depuradora Tercera Cuenca", "Latitud": -38.71261139, "Longitud": -62.34359171 },

	  //{ "Nombre": "Embalse Paso de las Piedras", "Latitud": -38.38403752, "Longitud": -61.75976888, "CaudalDisponible": "259.000", "CaudalCaptado": "240.000" },
	  {"PuntosSistemaAbastecimientoMarkersVisible": true,  "Nombre": "Embalse Paso de las Piedras", "Latitud": -38.38403752, "Longitud": -61.75976888, 
	  "Caudal": "240.000", "Turbidez": "22", "Cota": "157,9", "Cota_Alerta_1": "155", "Cota_Alerta_2": "152", "Cota_Alerta_3": "150"},
	  
	  {"PuntosSistemaAbastecimientoMarkersVisible": true,  "Nombre": "Río Sauce Grande", "Latitud": -38.487238, "Longitud": -61.785425, "Caudal": "7.200", "Conductividad": "XXXX"},
	  
	  {"PuntosSistemaAbastecimientoMarkersVisible": true,  "Nombre": "Toma Paraje Mirasoles", "Latitud": -38.668450, "Longitud": -62.120709, "Caudal": "21.600", "Turbidez": "25" },
	  {"PuntosSistemaAbastecimientoMarkersVisible": true,  "Nombre": "Toma Empleados de Comercio", "Latitud": -38.678218, "Longitud": -62.168242, "Caudal": "14.400", "Turbidez": "25" },
    ];
	
	var SistemaAbastecimientoMarkers = {}; // Objeto para guardar los marcadores
	var SistemaAbastecimientoMarkersVisible = false; // Estado de visibilidad inicial
	
	
	// Crear marcadores y almacenarlos, pero no agregarlos al mapa de inmediato
	puntos_Sistema_de_Abastecimiento_Actual.forEach(function(punto) {
		if (punto.Nombre == "Planta Potabilizadora Patagonia" || punto.Nombre == "Planta Potabilizadora Grünbein" || punto.Nombre == "Planta Potabilizadora Modular") {
		  var marker = L.marker([punto.Latitud, punto.Longitud], { icon: customIcon })
	//		.bindPopup("<b>" + punto.Nombre + "</b><br>" + "Latitud: " + punto.Latitud + "<br>" + "Longitud: " + punto.Longitud);
			.bindPopup("<b>" + punto.Nombre + "</b><br>" + "Caudal potabilizado (m<sup>3</sup>/d): " + punto.Caudal);
		} else if (punto.Nombre == "Embalse Paso de las Piedras") {
	//		var marker = L.marker([punto.Latitud, punto.Longitud])
	////		.bindPopup("<b>" + punto.Nombre + "</b><br>" + "Latitud: " + punto.Latitud + "<br>" + "Longitud: " + punto.Longitud);
	//		.bindPopup("<b>" + punto.Nombre + "</b><br>" + "Caudal disponible (m<sup>3</sup>/d): " + punto.CaudalDisponible + "</b><br>" + "Caudal captado (m<sup>3</sup>/d): " + punto.CaudalCaptado);	

			var marker = L.marker([punto.Latitud, punto.Longitud], { icon: customIcon })
	//		.bindPopup("<b>" + punto.Nombre + "</b><br>" + "Latitud: " + punto.Latitud + "<br>" + "Longitud: " + punto.Longitud);
			.bindPopup("<b>" + punto.Nombre + "</b><br>" + "Caudal captado (m<sup>3</sup>/d): " + punto.Caudal + "</b><br>" + "Turbidez (NTU): " + punto.Turbidez + "</b><br>" + "Cota (14/12/2024) (m s.n.m.): " + punto.Cota
				+ "</b><br>" + "Cota Alerta 1 (m s.n.m.): " + punto.Cota_Alerta_1 + "</b><br>" + "Cota Alerta 2 (m s.n.m.): " + punto.Cota_Alerta_2 + "</b><br>" + "Cota Alerta 3 (m s.n.m.): " + punto.Cota_Alerta_3);	

			
		} else if (punto.Nombre == "Acueducto Principal") {
			var marker = L.marker([punto.Latitud, punto.Longitud], { icon: customIcon })
	//		.bindPopup("<b>" + punto.Nombre + "</b><br>" + "Latitud: " + punto.Latitud + "<br>" + "Longitud: " + punto.Longitud);
			.bindPopup("<b>" + punto.Nombre);		
		} else if (punto.Nombre == "Río Sauce Grande") {
			var marker = L.marker([punto.Latitud, punto.Longitud], { icon: customIcon })
	//		.bindPopup("<b>" + punto.Nombre + "</b><br>" + "Latitud: " + punto.Latitud + "<br>" + "Longitud: " + punto.Longitud);
			.bindPopup("<b>" + punto.Nombre + "</b><br>" + "Caudal potencialmente disponible (m<sup>3</sup>/d): " + punto.Caudal);		
		} else if (punto.Nombre == "Toma Paraje Mirasoles" || punto.Nombre == "Toma Empleados de Comercio") {
			var marker = L.marker([punto.Latitud, punto.Longitud], { icon: customIcon })
	//		.bindPopup("<b>" + punto.Nombre + "</b><br>" + "Latitud: " + punto.Latitud + "<br>" + "Longitud: " + punto.Longitud);
			.bindPopup("<b>" + punto.Nombre + "</b><br>" + "Caudal disponible (m<sup>3</sup>/d): " + punto.Caudal + "</b><br>" + "Turbidez (NTU): " + punto.Turbidez);		
		} else {
		  var marker = L.marker([punto.Latitud, punto.Longitud], { icon: customIcon })
	//		.bindPopup("<b>" + punto.Nombre + "</b><br>" + "Latitud: " + punto.Latitud + "<br>" + "Longitud: " + punto.Longitud);
			.bindPopup("<b>" + punto.Nombre + "</b><br>" + "Caudal disponible (m<sup>3</sup>/d): " + punto.Caudal);								
		}
	  // Guardar el marcador en un objeto para futura interacción
	  SistemaAbastecimientoMarkers[punto.Nombre] = marker;

	  // Mostrar la información al pasar el mouse (hover)
	  marker.on('mouseover', function() {
		marker.openPopup();
	  });

	  // Comportamiento al hacer click para mantener el pop-up abierto
	  marker.on('click', function() {
		if (marker.isPopupOpen()) {
		  marker.closePopup();
		} else {
		  marker.openPopup();
		}
	  });
	});





    var puntos_acuifero_secundario1 = [
        {"Nombre": "1", "Latitud": -38.75089687, "Longitud": -62.11355741 },
        {"Nombre": "1", "Latitud": -38.709558, "Longitud": -62.066274 },
		{"Nombre": "7", "Latitud": -38.661654, "Longitud": -61.953449 },
		{"Nombre": "7", "Latitud": -38.572388, "Longitud": -61.853625 },
		{"Nombre": "7", "Latitud": -38.545093, "Longitud": -61.831368 },
		
		{"Nombre": "7", "Latitud": -38.511597, "Longitud": -61.806357 },		
		{"Nombre": "1", "Latitud": -38.485623, "Longitud": -61.792469 },
        {"Nombre": "2", "Latitud": -38.478446, "Longitud": -61.791005 },
		{"Nombre": "3", "Latitud": -38.454210, "Longitud": -61.793201 },
//		{"Nombre": "4", "Latitud": -38.447713, "Longitud": -61.788042 },
		{"Nombre": "5", "Latitud": -38.439239, "Longitud": -61.788766 },
        {"Nombre": "1", "Latitud": -38.419458, "Longitud": -61.763070 },
	
    ];	

    var puntos_acuifero_secundario2 = [
        {"Nombre": "1", "Latitud": -38.75089687, "Longitud": -62.11355741 },
        {"Nombre": "1", "Latitud": -38.711316, "Longitud": -62.064643 },

		{"Nombre": "7", "Latitud": -38.663832, "Longitud": -61.951261 },
		{"Nombre": "7", "Latitud": -38.572987, "Longitud": -61.852542 },		
		{"Nombre": "7", "Latitud": -38.546433, "Longitud": -61.829213 },
		{"Nombre": "7", "Latitud": -38.511934, "Longitud": -61.805098 },		
		{"Nombre": "1", "Latitud": -38.485650, "Longitud": -61.790866 },
        {"Nombre": "2", "Latitud": -38.478610, "Longitud": -61.789576 },
		{"Nombre": "3", "Latitud": -38.454756, "Longitud": -61.791667 },
//		{"Nombre": "4", "Latitud": -38.447822, "Longitud": -61.785393 },
		{"Nombre": "5", "Latitud": -38.439799, "Longitud": -61.787596 },
        {"Nombre": "1", "Latitud": -38.419458, "Longitud": -61.763070 },
	
    ];	

    var puntos_acuifero_secundario3 = [
        {"Nombre": "1", "Latitud": -38.75089687, "Longitud": -62.11355741 },
        {"Nombre": "1", "Latitud": -38.712907, "Longitud": -62.061982 },

		{"Nombre": "7", "Latitud": -38.665910, "Longitud": -61.948042 },
		
		{"Nombre": "7", "Latitud": -38.573854, "Longitud": -61.851289 },
		
		{"Nombre": "7", "Latitud": -38.547997, "Longitud": -61.826565 },
		{"Nombre": "7", "Latitud": -38.512522, "Longitud": -61.804161 },
		{"Nombre": "1", "Latitud": -38.485650, "Longitud": -61.789471 },
        {"Nombre": "2", "Latitud": -38.478773, "Longitud": -61.788391 },
		{"Nombre": "3", "Latitud": -38.455384, "Longitud": -61.790238 },
//		{"Nombre": "4", "Latitud": -38.447877, "Longitud": -61.783162 },
		{"Nombre": "5", "Latitud": -38.440640, "Longitud": -61.786230 },
        {"Nombre": "1", "Latitud": -38.419458, "Longitud": -61.763070 },
	
    ];		

    var puntos_patagonia_a_polo = [
        {"Nombre": "1", "Latitud": -38.705181, "Longitud": -62.211512 },
        {"Nombre": "2", "Latitud": -38.705574, "Longitud": -62.211162 },
		{"Nombre": "3", "Latitud": -38.715614, "Longitud": -62.223889 },
		{"Nombre": "4", "Latitud": -38.715059, "Longitud": -62.224727 },	
		{"Nombre": "5", "Latitud": -38.735328, "Longitud": -62.250253 },
		{"Nombre": "6", "Latitud": -38.736299, "Longitud": -62.249180 },
		{"Nombre": "7", "Latitud": -38.743238, "Longitud": -62.257618 },
		{"Nombre": "8", "Latitud": -38.743267, "Longitud": -62.257669 },
		{"Nombre": "9", "Latitud": -38.744806, "Longitud": -62.256364 },
		{"Nombre": "10", "Latitud": -38.745742, "Longitud": -62.257440 },
		{"Nombre": "11", "Latitud": -38.756301, "Longitud": -62.270298 },
		{"Nombre": "12", "Latitud": -38.764165, "Longitud": -62.270341 },
		{"Nombre": "13", "Latitud": -38.771809, "Longitud": -62.280658 },
		{"Nombre": "14", "Latitud": -38.776565, "Longitud": -62.274916 },
		{"Nombre": "15", "Latitud": -38.781383, "Longitud": -62.280872 },
    ];	
	
    var puntos_planta_Grünbein_a_punta = [
        {"Nombre": "1", "Latitud": -38.75089687, "Longitud": -62.11355741 },
//		{"Nombre": "1", "Latitud": -38.752445, "Longitud": -62.112443 },
//		{"Nombre": "1", "Latitud": -38.758519, "Longitud": -62.117207 },
//		{"Nombre": "1", "Latitud": -38.763505, "Longitud": -62.110770 },
//		{"Nombre": "1", "Latitud": -38.772902, "Longitud": -62.122630 },
		{"Nombre": "1", "Latitud": -38.774513, "Longitud": -62.117145 },
		{"Nombre": "1", "Latitud": -38.819502, "Longitud": -62.105249 },
		{"Nombre": "1", "Latitud": -38.829333, "Longitud": -62.097923 },
		{"Nombre": "1", "Latitud": -38.847310, "Longitud": -62.092999 },
    ];	
	
	
    var puntos_2pozosSanJose_a_acueducto_sec = [
		{"Nombre": "25", "Latitud": -38.487778, "Longitud": -61.788247 },
		{"Nombre": "25", "Latitud": -38.486458, "Longitud": -61.792871 },
    ];	
	
    var puntos_2pozosSanJose_a_acueducto_sec2 = [
		{"Nombre": "25", "Latitud": -38.490438, "Longitud": -61.791068 },
		{"Nombre": "25", "Latitud": -38.489670, "Longitud": -61.794566 },
    ];	
	
    var puntos_3pozosSanJose_a_acueducto_sec = [
		{"Nombre": "25", "Latitud": -38.490195, "Longitud": -61.788343 },
		{"Nombre": "25", "Latitud": -38.489221, "Longitud": -61.792796 },
    ];	
	
    var puntos_3pozosSanJose_a_acueducto_sec2 = [
		{"Nombre": "25", "Latitud": -38.492567, "Longitud": -61.790162 },
		{"Nombre": "25", "Latitud": -38.491652, "Longitud": -61.794105 },
    ];	
	
    var puntos_3pozosSanJose_a_acueducto_sec3 = [
		{"Nombre": "25", "Latitud": -38.495426, "Longitud": -61.789041 },
		{"Nombre": "25", "Latitud": -38.494066, "Longitud": -61.795413 },
    ];		

	    var puntos_1pozosSanJose_a_acueducto_sec = [
		{"Nombre": "25", "Latitud": -38.495317, "Longitud": -61.787539 },
		{"Nombre": "25", "Latitud": -38.493629, "Longitud": -61.793836 },
    ];		
	
//		{"Nombre": "25", "Latitud": -38.487778, "Longitud": -61.788247 },	
//		{"Nombre": "26", "Latitud": -38.490172, "Longitud": -61.788360 },	
//		{"Nombre": "27", "Latitud": -38.490438, "Longitud": -61.791078 },	
//		{"Nombre": "28", "Latitud": -38.492565, "Longitud": -61.790172 },	
//		{"Nombre": "29", "Latitud": -38.495313, "Longitud": -61.787567 },		
//		{"Nombre": "30", "Latitud": -38.495426, "Longitud": -61.789088 },		
	

    var puntos_acueducto_principal_indicaciones = [
        {"Nombre": "1", "Latitud": -38.602451, "Longitud": -61.893325 },
		{"Nombre": "2", "Latitud": -38.598577, "Longitud": -61.898142 },
    ];	

    var puntos_acueducto_secundario_indicaciones = [
        {"Nombre": "1", "Latitud": -38.597285, "Longitud": -61.873026 },
		{"Nombre": "2", "Latitud": -38.600371, "Longitud": -61.859121 },
    ];	
		
    var puntos_acueducto_secundario_indicaciones2 = [
        {"Nombre": "1", "Latitud": -38.605335, "Longitud": -61.882381 },
		{"Nombre": "2", "Latitud": -38.611237, "Longitud": -61.865301 },
    ];

    var puntos_acueducto_secundario_indicaciones3 = [
        {"Nombre": "1", "Latitud": -38.616032, "Longitud": -61.896071 },
		{"Nombre": "2", "Latitud": -38.622906, "Longitud": -61.875343 },
    ];

    var puntos_arroyo_sauce_grande_tanque = [
        {"Nombre": "1", "Latitud": -38.487373, "Longitud": -61.785328 },
		{"Nombre": "2", "Latitud": -38.489708, "Longitud": -61.796036 },
    ];	
	
	
	
    var carteles_acueductos = [
        {"Nombre": "acueducto principal", "Latitud": -38.598577, "Longitud": -61.898142, "Mensaje": "Hormigón"  },
        {"Nombre": "acueducto principal", "Latitud": -38.600371, "Longitud": -61.859121, "Mensaje": "Hormigón"  },	
        {"Nombre": "acueducto principal", "Latitud": -38.611237, "Longitud": -61.865301, "Mensaje": "Fundición"  },	
        {"Nombre": "acueducto principal", "Latitud": -38.622906, "Longitud": -61.875343, "Mensaje": "Acero"  },		
    ];
	
	
    var puntos_union_5_pozos = [
        {"Nombre": "1", "Latitud": -38.471986, "Longitud": -61.795521 },
		{"Nombre": "2", "Latitud": -38.474910, "Longitud": -61.796422 },
		{"Nombre": "2", "Latitud": -38.476640, "Longitud": -61.797044 },
		{"Nombre": "2", "Latitud": -38.478824, "Longitud": -61.797130 },
		{"Nombre": "2", "Latitud": -38.481226, "Longitud": -61.796744 },
		{"Nombre": "2", "Latitud": -38.482267, "Longitud": -61.809576 },
		{"Nombre": "2", "Latitud": -38.489725, "Longitud": -61.796020 },
    ];	
		
    var puntos_union_3_pozos = [
        {"Nombre": "1", "Latitud": -38.472255, "Longitud": -61.793890 },
		{"Nombre": "2", "Latitud": -38.473381, "Longitud": -61.793890 },
		{"Nombre": "2", "Latitud": -38.474674, "Longitud": -61.793354 },
		{"Nombre": "2", "Latitud": -38.481730, "Longitud": -61.795349 },
		{"Nombre": "2", "Latitud": -38.482267, "Longitud": -61.809576 },
		{"Nombre": "2", "Latitud": -38.489725, "Longitud": -61.796020 },
    ];
	
    var puntos_union_1_pozos = [
        {"Nombre": "1", "Latitud": -38.481847, "Longitud": -61.792881 },
		{"Nombre": "2", "Latitud": -38.480974, "Longitud": -61.795135 },
    ];	

    var puntos_patagonia_a_Grünbein = [
        {"Nombre": "1", "Latitud": -38.704485, "Longitud": -62.211049 },
		{"Nombre": "2", "Latitud": -38.711835, "Longitud": -62.180922 },
		{"Nombre": "2", "Latitud": -38.750904, "Longitud": -62.113566 },
    ];	

	
	// Crear un div personalizado con un mensaje pequeño
	var cartelDiv = L.divIcon({
		className: 'custom-cartel',
		html: '<div style="font-size: 12px; padding: 2px;">' + carteles_acueductos[0].Mensaje + '</div>',
		iconSize: [70, 40] // Puedes ajustar el tamaño según tus necesidades
	});		

	// Crear un div personalizado con un mensaje pequeño
	var cartelDiv2 = L.divIcon({
		className: 'custom-cartel',
		html: '<div style="font-size: 12px; padding: 2px;">' + carteles_acueductos[1].Mensaje + '</div>',
		iconSize: [70, 40] // Puedes ajustar el tamaño según tus necesidades
	});	

	// Crear un div personalizado con un mensaje pequeño
	var cartelDiv3 = L.divIcon({
		className: 'custom-cartel',
		html: '<div style="font-size: 12px; padding: 2px;">' + carteles_acueductos[2].Mensaje + '</div>',
		iconSize: [70, 40] // Puedes ajustar el tamaño según tus necesidades
	});	

	// Crear un div personalizado con un mensaje pequeño
	var cartelDiv4 = L.divIcon({
		className: 'custom-cartel',
		html: '<div style="font-size: 12px; padding: 2px;">' + carteles_acueductos[3].Mensaje + '</div>',
		iconSize: [70, 40] // Puedes ajustar el tamaño según tus necesidades
	});	
	
	// Agregar el marcador con el div personalizado al mapa
	//L.marker([carteles_acueductos[0].Latitud, carteles_acueductos[0].Longitud], { icon: cartelDiv }).addTo(map);
	
	// Variable para almacenar el polígono
	var poligonoAcuifero;
	var poligonoVisible = false; // Estado de visibilidad del polígono


	var polygon = false;
	
    // Mostrar el polígono al hacer clic en "Acueductos"
    function toggleAcueductos() {
	  var AcueductosButton = document.getElementById("acueductos-button");	  
      if (!polygon) {
	  
		    

			if (!pozosVisible) {
				contador1 = 0;
				toggleSubterraneaPozos()
					
			}				

			if (!pozosVisible2) {
				contador2 = 0;
				toggleSubterraneaPozos2()
					
			}		


	  
			AcueductosButton.classList.toggle("active");
	  
			// Convertir los puntos en un arreglo de coordenadas [lat, lng]
			var coordenadas = puntos_acuifero_principal.map(function(punto) {
				return [punto.Latitud, punto.Longitud];
			});
			
			var coordenadas2 = puntos_acuifero_principal_a_cabildo.map(function(punto) {
				return [punto.Latitud, punto.Longitud];
			});

			var coordenadas3 = puntos_acuifero_principal_derivacion_Grünbein.map(function(punto) {
				return [punto.Latitud, punto.Longitud];
			});
						
			var coordenadas4 = puntos_acuifero_principal_a_toma_marisoles.map(function(punto) {
				return [punto.Latitud, punto.Longitud];
			});			
			
			var coordenadas5 = puntos_acuifero_principal_a_toma_empleado_de_comercios.map(function(punto) {
				return [punto.Latitud, punto.Longitud];
			});	

			var coordenadas6 = puntos_acuifero_secundario1.map(function(punto) {
				return [punto.Latitud, punto.Longitud];
			});				

			var coordenadas7 = puntos_acuifero_secundario2.map(function(punto) {
				return [punto.Latitud, punto.Longitud];
			});	

			var coordenadas8 = puntos_acuifero_secundario3.map(function(punto) {
				return [punto.Latitud, punto.Longitud];
			});	

			var coordenadas9 = puntos_patagonia_a_polo.map(function(punto) {
				return [punto.Latitud, punto.Longitud];
			});	
			
			var coordenadas10 = puntos_planta_Grünbein_a_punta.map(function(punto) {
				return [punto.Latitud, punto.Longitud];
			});	

			var coordenadas11 = puntos_acuifero_principal_a_toma_marisoles2.map(function(punto) {
				return [punto.Latitud, punto.Longitud];
			});	

			var coordenadas12 = puntos_2pozosSanJose_a_acueducto_sec.map(function(punto) {
				return [punto.Latitud, punto.Longitud];
			});

			var coordenadas13 = puntos_2pozosSanJose_a_acueducto_sec2.map(function(punto) {
				return [punto.Latitud, punto.Longitud];
			});

			var coordenadas14 = puntos_3pozosSanJose_a_acueducto_sec.map(function(punto) {
				return [punto.Latitud, punto.Longitud];
			});

			var coordenadas15 = puntos_3pozosSanJose_a_acueducto_sec2.map(function(punto) {
				return [punto.Latitud, punto.Longitud];
			});

			var coordenadas16 = puntos_3pozosSanJose_a_acueducto_sec3.map(function(punto) {
				return [punto.Latitud, punto.Longitud];
			});

			var coordenadas17 = puntos_1pozosSanJose_a_acueducto_sec.map(function(punto) {
				return [punto.Latitud, punto.Longitud];
			});			

			var coordenadas18 = puntos_acueducto_principal_indicaciones.map(function(punto) {
				return [punto.Latitud, punto.Longitud];
			});	
			
			var coordenadas19 = puntos_acueducto_secundario_indicaciones.map(function(punto) {
				return [punto.Latitud, punto.Longitud];
			});	
			
			var coordenadas20 = puntos_acueducto_secundario_indicaciones2.map(function(punto) {
				return [punto.Latitud, punto.Longitud];
			});				

			var coordenadas21 = puntos_acueducto_secundario_indicaciones3.map(function(punto) {
				return [punto.Latitud, punto.Longitud];
			});

			var coordenadas22 = puntos_arroyo_sauce_grande_tanque.map(function(punto) {
				return [punto.Latitud, punto.Longitud];
			});
	
			var coordenadas23 = puntos_union_5_pozos.map(function(punto) {
				return [punto.Latitud, punto.Longitud];
			});
	
			var coordenadas24 = puntos_union_3_pozos.map(function(punto) {
				return [punto.Latitud, punto.Longitud];
			});	
	
			var coordenadas25 = puntos_union_1_pozos.map(function(punto) {
				return [punto.Latitud, punto.Longitud];
			});		
	
			var coordenadas26 = puntos_patagonia_a_Grünbein.map(function(punto) {
				return [punto.Latitud, punto.Longitud];
			});		
	
			// Crear y agregar el polígono al mapa
			poligonoAcuifero = L.polyline(coordenadas, {
				color: '#9654e5', // Puedes personalizar el color
				weight: 4,
				fillOpacity: 0.4
			}).addTo(map);
			
			// Vincular popup
			poligonoAcuifero.bindPopup("<b>Acueducto principal</b>" + "</b><br>" + "Hormigón" + "</b><br>" + "1700-1500 mm" + "</b><br>" + "Caudal de conducción (m<sup>3</sup>/d): " + "259.000", {autoPan: false});
			
			
			// Crear y agregar el polígono al mapa
			poligonoAcuifero4 = L.polyline(coordenadas4, {
				color: '#44d6e2', // Puedes personalizar el color
				weight: 4,
				fillOpacity: 0.4
			}).addTo(map);			

			
			// Crear y agregar el polígono al mapa
			poligonoAcuifero5 = L.polyline(coordenadas5, {
				color: '#44d6e2', // Puedes personalizar el color
				weight: 4,
				fillOpacity: 0.4
			}).addTo(map);
			
			// Crear y agregar el polígono al mapa
			poligonoAcuifero6 = L.polyline(coordenadas6, {
				color: '#007d8e', // Puedes personalizar el color
				weight: 2,
				fillOpacity: 0.4
			}).addTo(map);

			// Vincular popup
			poligonoAcuifero6.bindPopup("<b>Acueducto secundario</b>" + "</b><br>" + "Acero" + "</b><br>" + "457-381 mm" + "</b><br>" + "Tramo fuera de servicio" + "</b><br>" + "(bypass a HF)" + "</b><br>" + "Caudal de conducción (m<sup>3</sup>/d): " + "7.200", {autoPan: false});

			

			// Crear y agregar el polígono al mapa
			poligonoAcuifero7 = L.polyline(coordenadas7, {
				color: '#007d8e', // Puedes personalizar el color
				weight: 2,
				fillOpacity: 0.4
			}).addTo(map);

			// Vincular popup
			poligonoAcuifero7.bindPopup("<b>Acueducto secundario</b>" + "</b><br>" + "Hierro fundido (HF)" + "</b><br>" + "457-381 mm" + "</b><br>" + "Caudal de conducción (m<sup>3</sup>/d): " + "7.200", {autoPan: false});
						
			
			// Crear y agregar el polígono al mapa
			poligonoAcuifero8 = L.polyline(coordenadas8, {
				color: '#007d8e', // Puedes personalizar el color
				weight: 3,
				fillOpacity: 0.4
			}).addTo(map);

			// Vincular popup
			poligonoAcuifero8.bindPopup("<b>Acueducto secundario</b>" + "</b><br>" + "Hormigón" + "</b><br>" + "600 mm" + "</b><br>" + "En reparación" + "</b><br>" + "(próximamente habilitado)" + "</b><br>" + "Caudal de conducción (m<sup>3</sup>/d): " + "16.800", {autoPan: false});
						
/*			
			// Crear y agregar el polígono al mapa
			poligonoAcuifero9 = L.polyline(coordenadas9, {
				color: 'darkgreen', // Puedes personalizar el color
				weight: 4,
				fillOpacity: 0.4
			}).addTo(map);
*/
			// Crear y agregar el polígono al mapa
			poligonoAcuifero10 = L.polyline(coordenadas10, {
				color: '#152544', // Puedes personalizar el color
				weight: 4,
				fillOpacity: 0.4
			}).addTo(map);
			
			poligonoAcuifero11 = L.polyline(coordenadas11, {
				color: '#44d6e2', // Puedes personalizar el color
				weight: 4,
				fillOpacity: 0.4
			}).addTo(map);	

			poligonoAcuifero12 = L.polyline(coordenadas12, {
				color: '#152544', // Puedes personalizar el color
				weight: 1,
				fillOpacity: 0.4
			}).addTo(map);

			poligonoAcuifero13 = L.polyline(coordenadas13, {
				color: '#152544', // Puedes personalizar el color
				weight: 1,
				fillOpacity: 0.4
			}).addTo(map);

			poligonoAcuifero14 = L.polyline(coordenadas14, {
				color: '#152544', // Puedes personalizar el color
				weight: 1,
				fillOpacity: 0.4
			}).addTo(map);

			poligonoAcuifero15 = L.polyline(coordenadas15, {
				color: '#152544', // Puedes personalizar el color
				weight: 1,
				fillOpacity: 0.4
			}).addTo(map);

			poligonoAcuifero16 = L.polyline(coordenadas16, {
				color: '#152544', // Puedes personalizar el color
				weight: 1,
				fillOpacity: 0.4
			}).addTo(map);

			poligonoAcuifero17 = L.polyline(coordenadas17, {
				color: '#152544', // Puedes personalizar el color
				weight: 1,
				fillOpacity: 0.4
			}).addTo(map);			
/*
			// Crear y agregar el polígono al mapa
			poligonoAcuifero18 = L.polyline(coordenadas18, {
				color: 'black', // Puedes personalizar el color
				weight: 1,
				fillOpacity: 0.4
			}).addTo(map);
			
			// Crear y agregar el polígono al mapa
			poligonoAcuifero19 = L.polyline(coordenadas19, {
				color: 'black', // Puedes personalizar el color
				weight: 1,
				fillOpacity: 0.4
			}).addTo(map);			
			
			// Crear y agregar el polígono al mapa
			poligonoAcuifero20 = L.polyline(coordenadas20, {
				color: 'black', // Puedes personalizar el color
				weight: 1,
				fillOpacity: 0.4
			}).addTo(map);				
			
			// Crear y agregar el polígono al mapa
			poligonoAcuifero21 = L.polyline(coordenadas21, {
				color: 'black', // Puedes personalizar el color
				weight: 1,
				fillOpacity: 0.4
			}).addTo(map);
*/
			// Crear y agregar el polígono al mapa
			poligonoAcuifero22 = L.polyline(coordenadas22, {
				color: '#152544', // Puedes personalizar el color
				weight: 1,
				fillOpacity: 0.4
			}).addTo(map);

			// Crear y agregar el polígono al mapa
			poligonoAcuifero23 = L.polyline(coordenadas23, {
				color: '#152544', // Puedes personalizar el color
				weight: 1,
				fillOpacity: 0.4
			}).addTo(map);

			// Crear y agregar el polígono al mapa
			poligonoAcuifero24 = L.polyline(coordenadas24, {
				color: '#152544', // Puedes personalizar el color
				weight: 1,
				fillOpacity: 0.4
			}).addTo(map);

			// Crear y agregar el polígono al mapa
			poligonoAcuifero25 = L.polyline(coordenadas25, {
				color: '#152544', // Puedes personalizar el color
				weight: 1,
				fillOpacity: 0.4
			}).addTo(map);

			// Crear y agregar el polígono al mapa
			poligonoAcuifero26 = L.polyline(coordenadas26, {
				color: '#152544', // Puedes personalizar el color
				weight: 4,
				fillOpacity: 0.4
			}).addTo(map);
			
			// Agregar el marcador con el div personalizado al mapa
//			marcador_cartel = L.marker([carteles_acueductos[0].Latitud, carteles_acueductos[0].Longitud], { icon: cartelDiv }).addTo(map);
//			marcador_cartel2 = L.marker([carteles_acueductos[1].Latitud, carteles_acueductos[1].Longitud], { icon: cartelDiv2 }).addTo(map);
//			marcador_cartel3 = L.marker([carteles_acueductos[2].Latitud, carteles_acueductos[2].Longitud], { icon: cartelDiv3 }).addTo(map);
//			marcador_cartel4 = L.marker([carteles_acueductos[3].Latitud, carteles_acueductos[3].Longitud], { icon: cartelDiv4 }).addTo(map);
			
      } else {
	  	  
			AcueductosButton.classList.remove("active");  // Remover la clase 'active'
			AcueductosButton.classList.add("nonactive");  // Añadir la clase 'nonactive'
			
			// Si el polígono ya está visible, eliminarlo del mapa
			map.removeLayer(poligonoAcuifero);
//			map.removeLayer(poligonoAcuifero2);
//			map.removeLayer(poligonoAcuifero3);
			map.removeLayer(poligonoAcuifero4);
			map.removeLayer(poligonoAcuifero5);
			map.removeLayer(poligonoAcuifero6);
			map.removeLayer(poligonoAcuifero7);
			map.removeLayer(poligonoAcuifero8);
//			map.removeLayer(poligonoAcuifero9);
			map.removeLayer(poligonoAcuifero10);
			map.removeLayer(poligonoAcuifero11);	
			map.removeLayer(poligonoAcuifero12);
			map.removeLayer(poligonoAcuifero13);
			map.removeLayer(poligonoAcuifero14);
			map.removeLayer(poligonoAcuifero15);
			map.removeLayer(poligonoAcuifero16);
			map.removeLayer(poligonoAcuifero17);
//			map.removeLayer(poligonoAcuifero18);		
//			map.removeLayer(poligonoAcuifero19);
//			map.removeLayer(poligonoAcuifero20);			
//			map.removeLayer(poligonoAcuifero21);
			map.removeLayer(poligonoAcuifero22);
			map.removeLayer(poligonoAcuifero23);
			map.removeLayer(poligonoAcuifero24);
			map.removeLayer(poligonoAcuifero25);
			map.removeLayer(poligonoAcuifero26);
			
//			map.removeLayer(marcador_cartel);
//			map.removeLayer(marcador_cartel2);
//			map.removeLayer(marcador_cartel3);
//			map.removeLayer(marcador_cartel4);	  

			if (pozosVisible) {
				toggleSubterraneaPozos()
					
			}				

			if (pozosVisible2) {
				toggleSubterraneaPozos2()
					
			}

//			AcueductosButton.classList.remove("active");  // Remover la clase 'active'
//			AcueductosButton.classList.add("nonactive");  // Añadir la clase 'nonactive'		
			

	  }
	  	polygon = !polygon;
    }
	
	
	

	function toggleSistemaAbastecimiento() {
		var btnSistemaAbastecimiento = document.getElementById("toggle-Sistema-abastecimiento");
		var subpanelSistemaAbastecimiento = document.getElementById("subpanel-Sistema-abastecimiento");
		var AcueductosButton = document.getElementById("acueductos-button");		
		if (!poligonoVisible) {
		
			var iniciador = 0; 
				
			map.flyTo([-38.585210, -61.929932], 10.5, {
			animate: true,
			duration: 2.0
			}); // Ajusta el nivel de zoom según sea necesario
								
			for (var nombre in SistemaAbastecimientoMarkers) {
			  if (SistemaAbastecimientoMarkers.hasOwnProperty(nombre)) {
				SistemaAbastecimientoMarkers[nombre].addTo(map);
			  }
			}
			subpanelSistemaAbastecimiento.style.display = "block"; // Mostrar el subpanel			

			// Crear botones para cada marcador en el subpanel
			subpanelSistemaAbastecimiento.innerHTML = "<h4> Sistema de Abastecimiento Actual </h4>"; // Limpiar el contenido existente y agregar el título
			
			
			// Crear el botón Acueductos dinámicamente
			var acueductosButton = document.createElement("button");
			acueductosButton.id = "acueductos-button";
			acueductosButton.innerHTML = "Acueductos";
			acueductosButton.style.display = "block"; // Opcional: mostrar en una nueva línea
			acueductosButton.style.marginBottom = "5px"; // Espaciado opcional
			acueductosButton.onclick = function () {
				toggleAcueductos(); // Llamar a la función específica de Acueductos
			};
			subpanelSistemaAbastecimiento.appendChild(acueductosButton);			
			
			var PozosCabildoButton = document.createElement("button");
			PozosCabildoButton.id = "toggle-Agua-Subterranea-Pozos";
			PozosCabildoButton.innerHTML = "Pozos Cabildo";
			PozosCabildoButton.style.display = "block"; // Opcional: mostrar en una nueva línea
			PozosCabildoButton.style.marginBottom = "5px"; // Espaciado opcional
			PozosCabildoButton.onclick = function () {
				toggleSubterraneaPozos(); // Llamar a la función específica de Acueductos
			};
			subpanelSistemaAbastecimiento.appendChild(PozosCabildoButton);			
			
			var PozosBajoSanJoseButton = document.createElement("button");
			PozosBajoSanJoseButton.id = "toggle-Agua-Subterranea-Pozos2";
			PozosBajoSanJoseButton.innerHTML = "Pozos Bajo San José";
			PozosBajoSanJoseButton.style.display = "block"; // Opcional: mostrar en una nueva línea
			PozosBajoSanJoseButton.style.marginBottom = "5px"; // Espaciado opcional
			PozosBajoSanJoseButton.onclick = function () {
				toggleSubterraneaPozos2(); // Llamar a la función específica de Acueductos
			};
			subpanelSistemaAbastecimiento.appendChild(PozosBajoSanJoseButton);			
/*			
			puntos_Sistema_de_Abastecimiento_Actual.forEach(function(punto) {
			  var SistemaAbastecimientomarkerButton = document.createElement("button");
			  SistemaAbastecimientomarkerButton.classList.add("marker-Button"); // Asignar clase		  
			  SistemaAbastecimientomarkerButton.innerHTML = punto.Nombre;
			  SistemaAbastecimientomarkerButton.style.display = "block"; // Opcional: mostrar cada botón en una nueva línea
			  SistemaAbastecimientomarkerButton.style.marginBottom = "5px"; // Espacio entre los botones
			  SistemaAbastecimientomarkerButton.onclick = function() {
				map.flyTo([punto.Latitud, punto.Longitud], 13, {
				animate: true,
				duration: 2.0
				}); // Ajusta el nivel de zoom según sea necesario
			  };
			  subpanelSistemaAbastecimiento.appendChild(SistemaAbastecimientomarkerButton);
			});
*/			
			
			puntos_Sistema_de_Abastecimiento_Actual.forEach(function(punto) {
				var SistemaAbastecimientomarkerButton = document.createElement("button");
				SistemaAbastecimientomarkerButton.classList.add("marker-Button"); // Asignar clase
				SistemaAbastecimientomarkerButton.innerHTML = punto.Nombre;
				SistemaAbastecimientomarkerButton.style.display = "block"; // Opcional: mostrar cada botón en una nueva línea
				SistemaAbastecimientomarkerButton.style.marginBottom = "5px"; // Espacio entre los botones
				SistemaAbastecimientomarkerButton.classList.toggle("active");
				SistemaAbastecimientomarkerButton.onclick = function() {
				if (!punto.PuntosSistemaAbastecimientoMarkersVisible) {
					SistemaAbastecimientoMarkers[punto.Nombre].addTo(map);
					punto.PuntosSistemaAbastecimientoMarkersVisible = !punto.PuntosSistemaAbastecimientoMarkersVisible;
					SistemaAbastecimientomarkerButton.classList.toggle("active");	
					map.flyTo([punto.Latitud, punto.Longitud], 13, {
					animate: true,
					duration: 2.0
					}); // Ajusta el nivel de zoom según sea necesario					
				} else {
					map.removeLayer(SistemaAbastecimientoMarkers[punto.Nombre]);
					punto.PuntosSistemaAbastecimientoMarkersVisible = !punto.PuntosSistemaAbastecimientoMarkersVisible;	
					SistemaAbastecimientomarkerButton.classList.remove("active");  // Remover la clase 'active'
					SistemaAbastecimientomarkerButton.classList.add("nonactive");  // Añadir la clase 'nonactive'					
				}};
				subpanelSistemaAbastecimiento.appendChild(SistemaAbastecimientomarkerButton);
			});				
			
			
										
			poligonoVisible = true; // Cambiar el estado a visible
			btnSistemaAbastecimiento.classList.toggle("active");
		
			
		} else {
		
			if (polygon) {
				toggleAcueductos()
					
			}				

			if (pozosVisible) {
				toggleSubterraneaPozos()
					
			}				

			if (pozosVisible2) {
				toggleSubterraneaPozos2()
					
			}				
			
			// Si los marcadores están visibles, eliminarlos del mapa
			for (var nombre in SistemaAbastecimientoMarkers) {
			  if (SistemaAbastecimientoMarkers.hasOwnProperty(nombre)) {	  
				map.removeLayer(SistemaAbastecimientoMarkers[nombre]);
			  }
			}
			subpanelSistemaAbastecimiento.style.display = "none"; // Ocultar el subpanel


			
			poligonoVisible = false; // Cambiar el estado a no visible
			btnSistemaAbastecimiento.classList.remove("active");  // Remover la clase 'active'
		    btnSistemaAbastecimiento.classList.add("nonactive");  // Añadir la clase 'nonactive'
			
			puntos_Sistema_de_Abastecimiento_Actual.forEach(function(punto) {
				punto.PuntosSistemaAbastecimientoMarkersVisible = true;
			});
		}
		
			
		if (poligonoVisible) {
			toggleAcueductos()	
		}		
		
		contador1 = 0;
		contador2 = 0;
		
	}






	
    var puntos_pozo_cabildo = [
        {"Nombre": "1", "Latitud": -38.484677, "Longitud": -61.827227 },
		{"Nombre": "2", "Latitud": -38.485265, "Longitud": -61.827742 },
		{"Nombre": "3", "Latitud": -38.485920, "Longitud": -61.828536 },	
		{"Nombre": "4", "Latitud": -38.486626, "Longitud": -61.829222 },	
		{"Nombre": "5", "Latitud": -38.487549, "Longitud": -61.830210 },	
		{"Nombre": "6", "Latitud": -38.488456, "Longitud": -61.831304 },	
		{"Nombre": "7", "Latitud": -38.489649, "Longitud": -61.832956 },		
		{"Nombre": "8", "Latitud": -38.490959, "Longitud": -61.835166 },	
		{"Nombre": "9", "Latitud": -38.491816, "Longitud": -61.835166 },	
		{"Nombre": "10", "Latitud": -38.492370, "Longitud": -61.835939 },		
		{"Nombre": "11", "Latitud": -38.493075, "Longitud": -61.836776 },	
		{"Nombre": "12", "Latitud": -38.493730, "Longitud": -61.837569 },		
		{"Nombre": "13", "Latitud": -38.494637, "Longitud": -61.838621 },	
		{"Nombre": "14", "Latitud": -38.493982, "Longitud": -61.839651 },	
		{"Nombre": "15", "Latitud": -38.493277, "Longitud": -61.840574 },
		{"Nombre": "16", "Latitud": -38.495410, "Longitud": -61.839715 },
	
	];
	
    var puntos_pozo_san_jose = [	
		{"Nombre": "17", "Latitud": -38.471920, "Longitud": -61.795540 },
		{"Nombre": "18", "Latitud": -38.472273, "Longitud": -61.793909 },
		{"Nombre": "19", "Latitud": -38.473365, "Longitud": -61.793952 },
		{"Nombre": "20", "Latitud": -38.474642, "Longitud": -61.793372 },
		{"Nombre": "21", "Latitud": -38.474927, "Longitud": -61.796505 },
		{"Nombre": "22", "Latitud": -38.476557, "Longitud": -61.797127 },
		{"Nombre": "23", "Latitud": -38.478844, "Longitud": -61.797173 },
		{"Nombre": "24", "Latitud": -38.481837, "Longitud": -61.792894 },
		{"Nombre": "31", "Latitud": -38.481186, "Longitud": -61.796792 },		
		{"Nombre": "25", "Latitud": -38.487778, "Longitud": -61.788247 },	
		{"Nombre": "26", "Latitud": -38.490172, "Longitud": -61.788360 },	
		{"Nombre": "27", "Latitud": -38.490438, "Longitud": -61.791078 },	
		{"Nombre": "28", "Latitud": -38.492565, "Longitud": -61.790172 },	
		{"Nombre": "29", "Latitud": -38.495313, "Longitud": -61.787567 },		
		{"Nombre": "30", "Latitud": -38.495426, "Longitud": -61.789088 },		
    ];	

	var pozosMarkers = {}; // Objeto para guardar los marcadores
	var pozosVisible = false; // Estado de visibilidad inicial
	
	var pozosMarkers2 = {}; // Objeto para guardar los marcadores
	var pozosVisible2 = false; // Estado de visibilidad inicial

	// Crear un icono pequeño
	var smallMarker = L.divIcon({
		className: 'small-marker', // Agrega una clase personalizada si necesitas
		html: '', // Puede quedar vacío si solo quieres el punto
		iconSize: [6, 6], // Tamaño del icono (ajústalo según lo que necesites)
		iconAnchor: [2, 2], // Centro del punto
		//color: "#007d8e"
	});

	// Crear marcadores y almacenarlos, pero no agregarlos al mapa de inmediato
	puntos_pozo_cabildo.forEach(function(punto) {
	  var marker = L.marker([punto.Latitud, punto.Longitud], { icon: smallMarker });

	  // Guardar el marcador en un objeto para futura interacción
	  pozosMarkers[punto.Nombre] = marker;
	});	
	
	// Crear marcadores y almacenarlos, pero no agregarlos al mapa de inmediato
	puntos_pozo_san_jose.forEach(function(punto) {
	  var marker = L.marker([punto.Latitud, punto.Longitud], { icon: smallMarker });

	  // Guardar el marcador en un objeto para futura interacción
	  pozosMarkers2[punto.Nombre] = marker;
	});		
	
      // Los puntos de la variable puntos_area_primera_cuenca
    var puntos_area_primera_cuenca = [
      [ -38.72643,  -62.30750 ],
	  [ -38.72851,  -62.31050 ],
	  [ -38.74337,  -62.29085 ],
	  [ -38.74150,  -62.28827 ],
	  [ -38.76037,  -62.26416 ],
	  [ -38.75730,  -62.26064 ],
	  [ -38.76138,  -62.25489 ],
	  [ -38.75830,  -62.25102 ],
	  [ -38.75977,  -62.24871 ],
	  [ -38.75626,  -62.23918 ],
	  [ -38.76238,  -62.22875 ],
	  [ -38.75807,  -62.21987 ],
	  [ -38.77710,  -62.19137 ],
	  [ -38.76345,  -62.15601 ],
	  [ -38.75770,  -62.16734 ],
	  [ -38.72985,  -62.13936 ],
	  [ -38.71284,  -62.18227 ],
	  [ -38.69931,  -62.16854 ],
	  [ -38.69596,  -62.17352 ],
	  [ -38.69837,  -62.17584 ],
	  [ -38.69971,  -62.17395 ],
	  [ -38.70835,  -62.18571 ],
	  [ -38.70299,  -62.19369 ],
	  [ -38.70949,  -62.20184 ],
	  [ -38.70072,  -62.21343 ],
	  [ -38.70942,  -62.22485 ],
	  [ -38.70353,  -62.23317 ],
	  [ -38.70601,  -62.23635 ],
	  [ -38.69965,  -62.24484 ],
	  [ -38.70085,  -62.24690 ],
	  [ -38.69489,  -62.25489 ],
	  [ -38.70011,  -62.26192 ],
	  [ -38.69764,  -62.27353 ],
	  [ -38.72851,  -62.31050 ]
    ];	

      // Los puntos de la variable puntos_area_segunda_cuenca
    var puntos_area_segunda_cuenca = [
      [ -38.74337,  -62.29085 ],
	  [ -38.74150,  -62.28827 ],
	  [ -38.76037,  -62.26416 ],
	  [ -38.75730,  -62.26064 ],
	  [ -38.76138,  -62.25489 ],
	  [ -38.75830,  -62.25102 ],
	  [ -38.75977,  -62.24871 ],
	  [ -38.75626,  -62.23918 ],
	  [ -38.76037,  -62.23969 ],
	  [ -38.78734,  -62.25986 ],
	  [ -38.78801,  -62.26398 ],
	  [ -38.78487,  -62.27420 ],
	  [ -38.78246,  -62.27720 ],
	  [ -38.77965,  -62.29051 ],
	  [ -38.76647,  -62.30201 ],
	  [ -38.75328,  -62.29909 ],
	  [ -38.74458,  -62.29205 ],
    ];	

      // Los puntos de la variable puntos_area_tercera_cuenca
    var puntos_area_tercera_cuenca = [
      [ -38.72643,  -62.30750 ],
	  [ -38.69723,  -62.27360 ],
	  [ -38.69563,  -62.27523 ],
	  [ -38.69449,  -62.27128 ],
	  [ -38.69134,  -62.26656 ],
	  [ -38.69000,  -62.25918 ],
	  [ -38.68725,  -62.25042 ],
	  [ -38.68290,  -62.24055 ],
	  [ -38.67559,  -62.22811 ],
	  [ -38.65830,  -62.25368 ],
	  [ -38.66333,  -62.25944 ],
	  [ -38.65375,  -62.27205 ],
	  [ -38.68270,  -62.31016 ],
	  [ -38.67157,  -62.32664 ],
	  [ -38.69435,  -62.35445 ],
	  [ -38.71538,  -62.33299 ],
	  [ -38.72690,  -62.30759 ],
    ];


	var convexHullsVisible = false; // Estado inicial de visibilidad
	var convexHullLayers = []; // Almacena las capas de las envolventes convexas

	var plantMarkers = {}; // Objeto para guardar los marcadores
	var markersVisible = false; // Estado de visibilidad inicial
	

	// Crear marcadores y almacenarlos, pero no agregarlos al mapa de inmediato
	puntos.forEach(function(punto) {
	  var marker = L.marker([punto.Latitud, punto.Longitud], { icon: customIcon })
//		.bindPopup("<b>" + punto.Nombre + "</b><br>" + "Latitud: " + punto.Latitud + "<br>" + "Longitud: " + punto.Longitud);
		.bindPopup("<b>" + punto.Nombre);

	  // Guardar el marcador en un objeto para futura interacción
	  plantMarkers[punto.Nombre] = marker;

	  // Mostrar la información al pasar el mouse (hover)
	  marker.on('mouseover', function() {
		marker.openPopup();
	  });

	  // Comportamiento al hacer click para mantener el pop-up abierto
	  marker.on('click', function() {
		if (marker.isPopupOpen()) {
		  marker.closePopup();
		} else {
		  marker.openPopup();
		}
	  });
	});
	
	
	var Empresas_Markers = {}; // Objeto para guardar los marcadores
	var Empresas_markersVisible = false; // Estado de visibilidad inicial	

	// Crear marcadores y almacenarlos, pero no agregarlos al mapa de inmediato
	puntos_agua_subterranea_empresas.forEach(function(punto) {
	  var marker = L.marker([punto.Latitud, punto.Longitud], { icon: customIcon })
		.bindPopup("<b>" + punto.Nombre + "</b><br>" + "Caudal captado (m<sup>3</sup>/d): " + punto.Caudal_de_agua_subterránea + "</b><br>" + "Conductividad (uS/cm): " + punto.Conductividad);

	  // Guardar el marcador en un objeto para futura interacción
	  Empresas_Markers[punto.Nombre] = marker;

	  // Mostrar la información al pasar el mouse (hover)
	  marker.on('mouseover', function() {
		marker.openPopup();
	  });

	  // Comportamiento al hacer click para mantener el pop-up abierto
	  marker.on('click', function() {
		if (marker.isPopupOpen()) {
		  marker.closePopup();
		} else {
		  marker.openPopup();
		}
	  });
	});


var punto_a_agregar_un_cartel = {
    latitud: -38.483829,  // Ejemplo de latitud
    longitud: -61.839809, // Ejemplo de longitud
    caudal: "19.200",   // Ejemplo de caudal
	Conductividad: "1.000"
};	

var mensajito = L.popup()
	.setLatLng([punto_a_agregar_un_cartel.latitud, punto_a_agregar_un_cartel.longitud])
	.setContent("Caudal disponible (m<sup>3</sup>/d): " + punto_a_agregar_un_cartel.caudal + "</b><br>" + "Conductividad (μS/cm): " + punto_a_agregar_un_cartel.Conductividad); // Mostrar el mensaje de caudal


	function toggleSubterraneaPozos() {
	  var btnPozos = document.getElementById("toggle-Agua-Subterranea-Pozos");

   		
		
	  	  
	  
	  if (pozosVisible) {
		map.removeLayer(mensajito);
		
		// Si los marcadores están visibles, eliminarlos del mapa
		for (var nombre in pozosMarkers) {
		  if (pozosMarkers.hasOwnProperty(nombre)) {
		    map.removeLayer(pozosMarkers[nombre]);
		  }
		}
		  btnPozos.classList.remove("active");  // Remover la clase 'active'
		  btnPozos.classList.add("nonactive");  // Añadir la clase 'nonactive'	
	  } else {
		btnPozos.classList.toggle("active");
		
		// Si los marcadores están ocultos, agregarlos al mapa
		for (var nombre in pozosMarkers) {
		  if (pozosMarkers.hasOwnProperty(nombre)) {
			pozosMarkers[nombre].addTo(map);
		  }
		}

        // Mostrar un cartel con el mensaje en el punto específico
			if (contador1 >= 1) {
				mensajito.openOn(map)
    		}
		
	  }

	  // Cambiar el estado de visibilidad
	  pozosVisible = !pozosVisible;	
	  contador1 = contador1 + 1;
	}


var punto_a_agregar_un_cartel2 = {
    latitud: -38.488935,  // Ejemplo de latitud
    longitud: -61.770458, // Ejemplo de longitud
    caudal: "28.800",   // Ejemplo de caudal
	Conductividad: "1.000"
};	

var mensajito2 = L.popup()
	.setLatLng([punto_a_agregar_un_cartel2.latitud, punto_a_agregar_un_cartel2.longitud])
	.setContent("Caudal disponible (m<sup>3</sup>/d): " + punto_a_agregar_un_cartel2.caudal + "</b><br>" + "Conductividad (μS/cm): " + punto_a_agregar_un_cartel2.Conductividad); // Mostrar el mensaje de caudal



	
	function toggleSubterraneaPozos2() {
	  var btnPozos2 = document.getElementById("toggle-Agua-Subterranea-Pozos2");
	  
	  if (pozosVisible2) {
	  
		map.removeLayer(mensajito2);
		
		// Si los marcadores están visibles, eliminarlos del mapa
		for (var nombre in pozosMarkers2) {
		  if (pozosMarkers2.hasOwnProperty(nombre)) {
		    map.removeLayer(pozosMarkers2[nombre]);
		  }
		}
		  btnPozos2.classList.remove("active");  // Remover la clase 'active'
		  btnPozos2.classList.add("nonactive");  // Añadir la clase 'nonactive'	
	  } else {
		btnPozos2.classList.toggle("active");
		// Si los marcadores están ocultos, agregarlos al mapa
		for (var nombre in pozosMarkers2) {
		  if (pozosMarkers2.hasOwnProperty(nombre)) {
			pozosMarkers2[nombre].addTo(map);
		  }
		}
        // Mostrar un cartel con el mensaje en el punto específico
			if (contador2 >= 1) {
				mensajito2.openOn(map)
    		}	
		
	  }

	  // Cambiar el estado de visibilidad
	  pozosVisible2 = !pozosVisible2;	
	  contador2 = contador2 + 1;
	}






	function toggleSubterraneaPozos3() {
	  var btnPozos3 = document.getElementById("toggle-Agua-Subterranea-Pozos3");
	  
	  if (pozosVisible) {
		map.removeLayer(mensajito);	  
		// Si los marcadores están visibles, eliminarlos del mapa
		for (var nombre in pozosMarkers) {
		  if (pozosMarkers.hasOwnProperty(nombre)) {
		    map.removeLayer(pozosMarkers[nombre]);
		  }
		}
		  btnPozos3.classList.remove("active");  // Remover la clase 'active'
		  btnPozos3.classList.add("nonactive");  // Añadir la clase 'nonactive'	
	  } else {
	  

		map.flyTo([-38.491085, -61.832986], 14, {
			animate: true,
			duration: 2.0
		}); // Ajusta el nivel de zoom según sea necesario
			
		btnPozos3.classList.toggle("active");
		// Si los marcadores están ocultos, agregarlos al mapa
		for (var nombre in pozosMarkers) {
		  if (pozosMarkers.hasOwnProperty(nombre)) {
			pozosMarkers[nombre].addTo(map);
		  }
		}
			if (contador1 >= 1) {
				mensajito.openOn(map)
    		}			
	  }

	  // Cambiar el estado de visibilidad
	  pozosVisible = !pozosVisible;	
	  contador1 = contador1 + 1;
	}
	
	function toggleSubterraneaPozos4() {
	  var btnPozos4 = document.getElementById("toggle-Agua-Subterranea-Pozos4");
	  
	  if (pozosVisible2) {
		map.removeLayer(mensajito2);	 	  
		// Si los marcadores están visibles, eliminarlos del mapa
		for (var nombre in pozosMarkers2) {
		  if (pozosMarkers2.hasOwnProperty(nombre)) {
		    map.removeLayer(pozosMarkers2[nombre]);
		  }
		}
		  btnPozos4.classList.remove("active");  // Remover la clase 'active'
		  btnPozos4.classList.add("nonactive");  // Añadir la clase 'nonactive'	
	  } else {

		map.flyTo([-38.485576, -61.791401], 14, {
			animate: true,
			duration: 2.0
		}); // Ajusta el nivel de zoom según sea necesario	  
	  
		btnPozos4.classList.toggle("active");
		// Si los marcadores están ocultos, agregarlos al mapa
		for (var nombre in pozosMarkers2) {
		  if (pozosMarkers2.hasOwnProperty(nombre)) {
			pozosMarkers2[nombre].addTo(map);
		  }
		}
			if (contador2 >= 1) {
				mensajito2.openOn(map)
    		}			
	  }

	  // Cambiar el estado de visibilidad
	  pozosVisible2 = !pozosVisible2;	
	  contador2 = contador2 + 1;
	}



//	  var btnPozos2 = document.getElementById("toggle-Agua-Subterranea-Pozos2");
	  
	  
//		<button id="toggle-Agua-Subterranea-Pozos" onclick="toggleSubterraneaPozos()">Pozos Cabildo</button>
//		<button id="toggle-Agua-Subterranea-Pozos2" onclick="toggleSubterraneaPozos()">Pozos Bajo San José</button>	  

/*	
	// Función para manejar la visibilidad de los marcadores y el subpanel
	function toggleMarkers() {
	  var btnActual = document.getElementById("btn-Actual");		
	  var subpanel = document.getElementById("subpanel");

	  if (markersVisible) {
		// Si los marcadores están visibles, eliminarlos del mapa
		for (var nombre in plantMarkers) {
		  if (plantMarkers.hasOwnProperty(nombre)) {
		  btnActual.classList.remove("active");  // Remover la clase 'active'
		  btnActual.classList.add("nonactive");  // Añadir la clase 'nonactive'		  
			map.removeLayer(plantMarkers[nombre]);
		  }
		}
		subpanel.style.display = "none"; // Ocultar el subpanel
	  } else {
	    btnActual.classList.toggle("active");
		// Si los marcadores están ocultos, agregarlos al mapa
		for (var nombre in plantMarkers) {
		  if (plantMarkers.hasOwnProperty(nombre)) {
			plantMarkers[nombre].addTo(map);
		  }
		}
		subpanel.style.display = "block"; // Mostrar el subpanel

		// Crear botones para cada marcador en el subpanel
		subpanel.innerHTML = "<h4>Marcadores</h4>"; // Limpiar el contenido existente y agregar el título
		puntos.forEach(function(punto) {
		  var markerButton = document.createElement("button");
		  markerButton.innerHTML = punto.Nombre;
		  markerButton.style.display = "block"; // Opcional: mostrar cada botón en una nueva línea
		  markerButton.style.marginBottom = "5px"; // Espacio entre los botones
		  markerButton.onclick = function() {
			map.flyTo([punto.Latitud, punto.Longitud], 14, {
			animate: true,
			duration: 2.0
			}); // Ajusta el nivel de zoom según sea necesario
		  };
		  subpanel.appendChild(markerButton);
		});
	  }

	  // Cambiar el estado de visibilidad
	  markersVisible = !markersVisible;
	}
*/	
	
	
	// Función para manejar la visibilidad de los marcadores y el subpanel
	function toggleSubterraneaEmpresas() {
	  var btnActual = document.getElementById("toggle-Agua-Subterranea-Empresas");		
	  var subpanel_Agua_Subterránea_Empresas = document.getElementById("subpanel-Agua-Subterranea-Empresas");

	  if (Empresas_markersVisible) {
		// Si los marcadores están visibles, eliminarlos del mapa
		for (var nombre in Empresas_Markers) {
		  if (Empresas_Markers.hasOwnProperty(nombre)) {
		  btnActual.classList.remove("active");  // Remover la clase 'active'
		  btnActual.classList.add("nonactive");  // Añadir la clase 'nonactive'		  
			map.removeLayer(Empresas_Markers[nombre]);
		  }
		}
		subpanel_Agua_Subterránea_Empresas.style.display = "none"; // Ocultar el subpanel
	  } else {
	    btnActual.classList.toggle("active");
		// Si los marcadores están ocultos, agregarlos al mapa
		for (var nombre in Empresas_Markers) {
		  if (Empresas_Markers.hasOwnProperty(nombre)) {
			Empresas_Markers[nombre].addTo(map);
		  }
		}
		subpanel_Agua_Subterránea_Empresas.style.display = "block"; // Mostrar el subpanel

		// Crear botones para cada marcador en el subpanel
		subpanel_Agua_Subterránea_Empresas.innerHTML = "<h4>Marcadores</h4>"; // Limpiar el contenido existente y agregar el título
		puntos_agua_subterranea_empresas.forEach(function(punto) {
		  var markerButton = document.createElement("button");
		  markerButton.innerHTML = punto.Nombre;
		  markerButton.style.display = "block"; // Opcional: mostrar cada botón en una nueva línea
		  markerButton.style.marginBottom = "5px"; // Espacio entre los botones
		  markerButton.onclick = function() {
			map.flyTo([punto.Latitud, punto.Longitud], 14, {
			animate: true,
			duration: 2.0
			}); // Ajusta el nivel de zoom según sea necesario
		  };
		  subpanel_Agua_Subterránea_Empresas.appendChild(markerButton);
		});
	  }

	  // Cambiar el estado de visibilidad
	  Empresas_markersVisible = !Empresas_markersVisible;
	}	
	
	
/*	
	var areaEmpresas = [
		{"Latitud_marcador": -38.785586, "Longitud_marcador": -62.280121, "EmpresasMarkersVisible": false, "Latitud": -38.785531834725035, "Longitud": -62.281728805807646, "tamaño": 209.6425529, "Nombre": "Profertil", "Caudal_Recolectado": 28743},  //Profertil
		{"Latitud_marcador": -38.782742, "Longitud_marcador": -62.289112, "EmpresasMarkersVisible": false, "Latitud": -38.78293923077242, "Longitud": -62.290494264514145, "tamaño": 95.60857702, "Nombre": "Mega", "Caudal_Recolectado": 5978 },   //Mega
		{"Latitud_marcador": -38.768556, "Longitud_marcador": -62.289133, "EmpresasMarkersVisible": false, "Latitud": -38.76844400179251, "Longitud": -62.286881328049546, "tamaño": 206.8332662, "Nombre": "Dow", "Caudal_Recolectado": 27978 },  //Dow
		{"Latitud_marcador": -38.687855, "Longitud_marcador": -62.394083, "EmpresasMarkersVisible": false, "Latitud": -38.687842707935516, "Longitud": -62.39214194385815, "tamaño": 133.4765897, "Nombre": "TGS Cerri", "Caudal_Recolectado": 11652 },	//TGS Cerri
		{"Latitud_marcador": -38.774374, "Longitud_marcador": -62.299052, "EmpresasMarkersVisible": false, "Latitud": -38.774332782559966, "Longitud": -62.299820304552654, "tamaño": 47.31807266, "Nombre": "TGS Galván", "Caudal_Recolectado": 1464	 },	//TGS Galván
		{"Latitud_marcador": -38.777883, "Longitud_marcador": -62.286183, "EmpresasMarkersVisible": false, "Latitud": -38.77803811546216, "Longitud": -62.287739636009086, "tamaño": 209.6425529, "Nombre": "Unipar", "Caudal_Recolectado": 25911 }	//Unipar
	];
*/	
	
	
	var areaEmpresas = [
		{"Latitud_marcador": -38.785586, "Longitud_marcador": -62.280121, "EmpresasMarkersVisible": false, "Latitud": -38.785531834725035, "Longitud": -62.281728805807646, "tamaño": 209.6425529, "Nombre": "PROFERTIL", "Caudal_Recolectado": 63},  //Profertil
		{"Latitud_marcador": -38.782742, "Longitud_marcador": -62.289112, "EmpresasMarkersVisible": false, "Latitud": -38.78293923077242, "Longitud": -62.290494264514145, "tamaño": 95.60857702, "Nombre": "MEGA", "Caudal_Recolectado": 13 },   //Mega
		{"Latitud_marcador": -38.768556, "Longitud_marcador": -62.289133, "EmpresasMarkersVisible": false, "Latitud": -38.76844400179251, "Longitud": -62.286881328049546, "tamaño": 206.8332662, "Nombre": "DOW", "Caudal_Recolectado": 63 },  //Dow
		{"Latitud_marcador": -38.687855, "Longitud_marcador": -62.394083, "EmpresasMarkersVisible": false, "Latitud": -38.687842707935516, "Longitud": -62.39214194385815, "tamaño": 133.4765897, "Nombre": "TGS CERRI", "Caudal_Recolectado": 26 },	//TGS Cerri
		{"Latitud_marcador": -38.774374, "Longitud_marcador": -62.299052, "EmpresasMarkersVisible": false, "Latitud": -38.774332782559966, "Longitud": -62.299820304552654, "tamaño": 47.31807266, "Nombre": "TGS GALVÁN", "Caudal_Recolectado": 3	 },	//TGS Galván
		{"Latitud_marcador": -38.777883, "Longitud_marcador": -62.286183, "EmpresasMarkersVisible": false, "Latitud": -38.77803811546216, "Longitud": -62.287739636009086, "tamaño": 199.047733, "Nombre": "UNIPAR", "Caudal_Recolectado": 57 },	//Unipar
		{"Latitud_marcador": -38.788668, "Longitud_marcador": -62.271, "EmpresasMarkersVisible": false, "Latitud": -38.788668, "Longitud": -62.271647, "tamaño": 32.710854, "Nombre": "CGPBB", "Caudal_Recolectado": 1.5 }	//CGPBB
	];

	var EmpresasMarkers = {}; // Objeto para guardar los marcadores
//	var EmpresasMarkersVisible = false; // Estado de visibilidad inicial

	// Crear marcadores y almacenarlos, pero no agregarlos al mapa de inmediato
	areaEmpresas.forEach(function(punto) {
	  var marker = L.marker([punto.Latitud_marcador, punto.Longitud_marcador], { icon: customIcon })
//		.bindPopup("<b>" + punto.Nombre + "</b><br>" + "Latitud: " + punto.Latitud + "<br>" + "Longitud: " + punto.Longitud);
		.bindPopup("<b>" + punto.Nombre + "</b><br>" + "Caudal potencialmente recolectable (m<sup>3</sup>/d): " + punto.Caudal_Recolectado);
		
	  // Guardar el marcador en un objeto para futura interacción
	  EmpresasMarkers[punto.Nombre] = marker;
	  //EmpresasMarkers[punto.Nombre].addTo(map);	
	  // Mostrar la información al pasar el mouse (hover)
	  marker.on('mouseover', function() {
		marker.openPopup();
	  });

	  // Comportamiento al hacer click para mantener el pop-up abierto
	  marker.on('click', function() {
		if (marker.isPopupOpen()) {
		  marker.closePopup();
		} else {
		  marker.openPopup();
		}
	  });
	});




	// Variable para controlar el estado del botón (si está activo o no)
	var pluvialVisible = false;

	var bounds1 = [
		  [areaEmpresas[0].Latitud - (areaEmpresas[0].tamaño / 2 / 111320), areaEmpresas[0].Longitud - (areaEmpresas[0].tamaño / 2 / 111320)], // Esquina inferior izquierda
		  [areaEmpresas[0].Latitud + (areaEmpresas[0].tamaño / 2 / 111320), areaEmpresas[0].Longitud + (areaEmpresas[0].tamaño / 2 / 111320)]  // Esquina superior derecha
	];
	
	var bounds2 = [
		  [areaEmpresas[1].Latitud - (areaEmpresas[1].tamaño / 2 / 111320), areaEmpresas[1].Longitud - (areaEmpresas[1].tamaño / 2 / 111320)], // Esquina inferior izquierda
		  [areaEmpresas[1].Latitud + (areaEmpresas[1].tamaño / 2 / 111320), areaEmpresas[1].Longitud + (areaEmpresas[1].tamaño / 2 / 111320)]  // Esquina superior derecha
	];

	var bounds3 = [
		  [areaEmpresas[2].Latitud - (areaEmpresas[2].tamaño / 2 / 111320), areaEmpresas[2].Longitud - (areaEmpresas[2].tamaño / 2 / 111320)], // Esquina inferior izquierda
		  [areaEmpresas[2].Latitud + (areaEmpresas[2].tamaño / 2 / 111320), areaEmpresas[2].Longitud + (areaEmpresas[2].tamaño / 2 / 111320)]  // Esquina superior derecha
	];

	var bounds4 = [
		  [areaEmpresas[3].Latitud - (areaEmpresas[3].tamaño / 2 / 111320), areaEmpresas[3].Longitud - (areaEmpresas[3].tamaño / 2 / 111320)], // Esquina inferior izquierda
		  [areaEmpresas[3].Latitud + (areaEmpresas[3].tamaño / 2 / 111320), areaEmpresas[3].Longitud + (areaEmpresas[3].tamaño / 2 / 111320)]  // Esquina superior derecha
	];

	var bounds5 = [
		  [areaEmpresas[4].Latitud - (areaEmpresas[4].tamaño / 2 / 111320), areaEmpresas[4].Longitud - (areaEmpresas[4].tamaño / 2 / 111320)], // Esquina inferior izquierda
		  [areaEmpresas[4].Latitud + (areaEmpresas[4].tamaño / 2 / 111320), areaEmpresas[4].Longitud + (areaEmpresas[4].tamaño / 2 / 111320)]  // Esquina superior derecha
	];

	var bounds6 = [
		  [areaEmpresas[5].Latitud - (areaEmpresas[5].tamaño / 2 / 111320), areaEmpresas[5].Longitud - (areaEmpresas[5].tamaño / 2 / 111320)], // Esquina inferior izquierda
		  [areaEmpresas[5].Latitud + (areaEmpresas[5].tamaño / 2 / 111320), areaEmpresas[5].Longitud + (areaEmpresas[5].tamaño / 2 / 111320)]  // Esquina superior derecha
	];	

	var bounds7 = [
		  [areaEmpresas[6].Latitud - (areaEmpresas[6].tamaño / 2 / 111320), areaEmpresas[6].Longitud - (areaEmpresas[6].tamaño / 2 / 111320)], // Esquina inferior izquierda
		  [areaEmpresas[6].Latitud + (areaEmpresas[6].tamaño / 2 / 111320), areaEmpresas[6].Longitud + (areaEmpresas[6].tamaño / 2 / 111320)]  // Esquina superior derecha
	];	

	
	// Ejemplo de cómo agregar un área de empresa al mapa
	var empresa1 = L.rectangle(bounds1, { color: '#007d8e', weight: 1, fillOpacity: 0, opacity: 0 }).addTo(map);
	var empresa2 = L.rectangle(bounds2, { color: '#007d8e', weight: 1, fillOpacity: 0, opacity: 0 }).addTo(map);
	var empresa3 = L.rectangle(bounds3, { color: '#007d8e', weight: 1, fillOpacity: 0, opacity: 0 }).addTo(map);
	var empresa4 = L.rectangle(bounds4, { color: '#007d8e', weight: 1, fillOpacity: 0, opacity: 0 }).addTo(map);
	var empresa5 = L.rectangle(bounds5, { color: '#007d8e', weight: 1, fillOpacity: 0, opacity: 0 }).addTo(map);
	var empresa6 = L.rectangle(bounds6, { color: '#007d8e', weight: 1, fillOpacity: 0, opacity: 0 }).addTo(map);
	var empresa7 = L.rectangle(bounds7, { color: '#007d8e', weight: 1, fillOpacity: 0, opacity: 0 }).addTo(map);

	// Guardar en un array para facilitar la manipulación
	var empresaLayers = [empresa1, empresa2, empresa3, empresa4, empresa5, empresa6, empresa7];






		// Dibujar el rectángulo en el mapa
//		var rectangle = L.rectangle(bounds, {color: "#ff7800", weight: 1, fillOpacity: 0.3});
//		rectangle.addTo(map);
	
    // Crear lista interactiva de plantas
    var plantEntries = document.getElementById("plant-entries");

	ingresar()

	// Función para ocultar la portada y mostrar el mapa
	function ingresar() {
	  document.getElementById("portada").style.display = "none";  // Ocultar la portada
	  var mapa = document.getElementById("map");
	  mapa.classList.add("visible");  // Mostrar el mapa añadiendo la clase
	  
	  // Mostrar el panel de las plantas
	  document.getElementById("plant-list").style.display = "flex";  // Hacer visible el panel
	  //document.getElementById("boton-de-descarga").style.display = "block";  // Hacer visible el boton de descarga
	  
	}	
	
    // Función para generar el archivo CSV
    function downloadCSV() {
      var csvContent = "Nombre,Latitud,Longitud\n";  // Encabezados de columnas

      puntos.forEach(function(punto) {
        csvContent += punto.Nombre + "," + punto.Latitud + "," + punto.Longitud + "\n";
      });

      // Crear un enlace para descargar el CSV
      var encodedUri = encodeURI("data:text/csv;charset=utf-8," + csvContent);
      var link = document.createElement("a");
      link.setAttribute("href", encodedUri);
      link.setAttribute("download", "plantas_potabilizadoras.csv");
      link.click();
    }


	function togglePanel() {
	  var panel = document.getElementById('plant-list');
	  var toggleButton = document.getElementById('toggle-panel');

	  if (panel.classList.contains('minimized')) {
		panel.classList.remove('minimized');
		toggleButton.textContent = '-'; // Cambiar el texto del botón a minimizar
	  } else {
		panel.classList.add('minimized');
		toggleButton.textContent = '+'; // Cambiar el texto del botón a maximizar
	  }
	}


/*

	var areaEmpresas = [
		{"Latitud": -38.785531834725035, "Longitud": -62.281728805807646, "tamaño": 209.6425529, "Nombre": "Profertil", "Caudal_Recolectado": 79},  //Profertil
		{"Latitud": -38.78293923077242, "Longitud": -62.290494264514145, "tamaño": 95.60857702, "Nombre": "Mega", "Caudal_Recolectado": 16 },   //Mega
		{"Latitud": -38.76844400179251, "Longitud": -62.286881328049546, "tamaño": 206.8332662, "Nombre": "Dow", "Caudal_Recolectado": 77 },  //Dow
		{"Latitud": -38.687842707935516, "Longitud": -62.39214194385815, "tamaño": 133.4765897, "Nombre": "TGS Cerri", "Caudal_Recolectado": 32 },	//TGS Cerri
		{"Latitud": -38.774332782559966, "Longitud": -62.299820304552654, "tamaño": 47.31807266, "Nombre": "TGS Galván", "Caudal_Recolectado": 4	 },	//TGS Galván
		{"Latitud": -38.77803811546216, "Longitud": -62.287739636009086, "tamaño": 209.6425529, "Nombre": "Unipar", "Caudal_Recolectado": 71 }	//Unipar
	];


	var EmpresasMarkers = {}; // Objeto para guardar los marcadores
	var EmpresasMarkersVisible = false; // Estado de visibilidad inicial

	// Crear marcadores y almacenarlos, pero no agregarlos al mapa de inmediato
	areaEmpresas.forEach(function(punto) {
	  var marker = L.marker([punto.Latitud, punto.Longitud])
//		.bindPopup("<b>" + punto.Nombre + "</b><br>" + "Latitud: " + punto.Latitud + "<br>" + "Longitud: " + punto.Longitud);
		.bindPopup("<b>" + punto.Nombre + "</b><br>" + "Caudal potencialmente recolectable (m<sup>3</sup>/d): " + punto.Caudal_Recolectado);
		
	  // Guardar el marcador en un objeto para futura interacción
	  EmpresasMarkers[punto.Nombre] = marker;

	  // Mostrar la información al pasar el mouse (hover)
	  marker.on('mouseover', function() {
		marker.openPopup();
	  });

	  // Comportamiento al hacer click para mantener el pop-up abierto
	  marker.on('click', function() {
		if (marker.isPopupOpen()) {
		  marker.closePopup();
		} else {
		  marker.openPopup();
		}
	  });
	});
*/


/*
	function toggleOtrasCuencas() {
	  var btnOtrasCuencas = document.getElementById("toggle-Otras-Cuencas");
	  var subpanelOtrasCuencas = document.getElementById("subpanel-Otras-Cuencas");
	  if (OtrasCuencasmarkersVisible) {
		  btnOtrasCuencas.classList.remove("active");  // Remover la clase 'active'
		  btnOtrasCuencas.classList.add("nonactive");  // Añadir la clase 'nonactive'	
		// Si los marcadores están visibles, eliminarlos del mapa
		for (var nombre in OtrasCuencasMarkers) {
		  if (OtrasCuencasMarkers.hasOwnProperty(nombre)) {	  
			map.removeLayer(OtrasCuencasMarkers[nombre]);
		  }
		}
		subpanelOtrasCuencas.style.display = "none"; // Ocultar el subpanel
	  } else {
	    btnOtrasCuencas.classList.toggle("active");
		// Si los marcadores están ocultos, agregarlos al mapa
		for (var nombre in OtrasCuencasMarkers) {
		  if (OtrasCuencasMarkers.hasOwnProperty(nombre)) {
			OtrasCuencasMarkers[nombre].addTo(map);
		  }
		}
		subpanelOtrasCuencas.style.display = "block"; // Mostrar el subpanel

		// Crear botones para cada marcador en el subpanel
		subpanelOtrasCuencas.innerHTML = "<h4> Marcadores </h4>"; // Limpiar el contenido existente y agregar el título
		puntos_Otras_Cuencas.forEach(function(punto) {
		  var OtrasCuencasmarkerButton = document.createElement("button");
		  OtrasCuencasmarkerButton.classList.add("marker-Button"); // Asignar clase		  
		  OtrasCuencasmarkerButton.innerHTML = punto.Nombre;
		  OtrasCuencasmarkerButton.style.display = "block"; // Opcional: mostrar cada botón en una nueva línea
		  OtrasCuencasmarkerButton.style.marginBottom = "5px"; // Espacio entre los botones
		  OtrasCuencasmarkerButton.onclick = function() {
			map.flyTo([punto.Latitud, punto.Longitud], 14, {
			animate: true,
			duration: 2.0
			}); // Ajusta el nivel de zoom según sea necesario
		  };
		  subpanelOtrasCuencas.appendChild(OtrasCuencasmarkerButton);
		});
	
	  }

	  // Cambiar el estado de visibilidad
	  OtrasCuencasmarkersVisible = !OtrasCuencasmarkersVisible;
	
	}
	*/

	togglePluvial()
	document.getElementById('boton-6').click();	
	
	// Función para alternar la visibilidad de las áreas de las empresas
	function togglePluvial() {
	  pluvialVisible = !pluvialVisible;  // Cambia el estado (visible/invisible)
	  var btnPluvial = document.getElementById("toggle-Pluvial");
	  var subpanel_Pluvial = document.getElementById("subpanel-Pluvial");
	  if (pluvialVisible) {
	      subpanel_Pluvial.style.display = "block"; // Mostrar el subpanel
		  
		// Crear botones para cada marcador en el subpanel
		subpanel_Pluvial.innerHTML = "<h4>Empresas</h4>"; // Limpiar el contenido existente y agregar el título
		areaEmpresas.forEach(function(area, index) {
			var markerButton = document.createElement("button");
			markerButton.classList.add("marker-Button"); // Asignar clase
			markerButton.innerHTML = area.Nombre;
			markerButton.id = "boton-" + index;
			markerButton.style.display = "block"; // Opcional: mostrar cada botón en una nueva línea
			markerButton.style.marginBottom = "5px"; // Espacio entre los botones
			markerButton.onclick = function() {
			if (!area.EmpresasMarkersVisible) {
				EmpresasMarkers[area.Nombre].addTo(map);
				area.EmpresasMarkersVisible = !area.EmpresasMarkersVisible;
				markerButton.classList.toggle("active");				
			} else {
				map.removeLayer(EmpresasMarkers[area.Nombre]);
				area.EmpresasMarkersVisible = !area.EmpresasMarkersVisible;	
				markerButton.classList.remove("active");  // Remover la clase 'active'
				markerButton.classList.add("nonactive");  // Añadir la clase 'nonactive'					
			}
			map.flyTo([area.Latitud, area.Longitud], 16, {
				animate: true,
				duration: 2.0
			}); // Ajusta el nivel de zoom según sea necesario
			};
			subpanel_Pluvial.appendChild(markerButton);
		});		  
		  
		  btnPluvial.classList.toggle("active");
		  map.flyTo([-38.77803811546216, -62.287739636009086], 14, {
				animate: true,
				duration: 2.0
		  }); // Ajusta el nivel de zoom según sea necesario		  
		} else {
		  btnPluvial.classList.remove("active");  // Remover la clase 'active'
		  btnPluvial.classList.add("nonactive");  // Añadir la clase 'nonactive'
		  subpanel_Pluvial.style.display = "none"; // Ocultar el subpanel
	  }
	  // Cambiar la opacidad de las áreas de las empresas
	  for (let i = 0; i < empresaLayers.length; i++) {
		if (pluvialVisible) {
		  // Hacer visibles (opacidad 1)
		  empresaLayers[i].setStyle({fillOpacity: 0.5, opacity: 0 });
		  
		  // Agregar el evento `mouseover` solo cuando la capa sea visible
		  empresaLayers[i].on('mouseover', function() {
			if (pluvialVisible) {  // Verifica si la capa es visible
			  empresaLayers[i].bindPopup("<b>" + areaEmpresas[i].Nombre + "</b><br>" + "Caudal potencialmente recolectable (m<sup>3</sup>/d): " + areaEmpresas[i].Caudal_Recolectado).openPopup();
			}
		  });
		  
		  // Agregar el evento `mouseout` solo cuando la capa sea visible
		  empresaLayers[i].on('mouseout', function() {
			if (pluvialVisible) {  // Verifica si la capa es visible
			  empresaLayers[i].closePopup();
			}
		  });
		  
		} else {
		  // Hacer invisibles (opacidad 0)
		  empresaLayers[i].setStyle({fillOpacity: 0, opacity: 0 });
		  // Eliminar eventos de los popups cuando las capas no están visibles
		  empresaLayers[i].off('mouseover');
		  empresaLayers[i].off('mouseout');		  
		}
	  }
	}

/*		// Crear los rectángulos y asociarlos con la información correspondiente en el popup
		if (!pluvialVisible) {
		empresa6.on('mouseover', function() {
		  empresa6.bindPopup("<b>" + areaEmpresas[5].Nombre + "</b><br>" + "Latitud: " + areaEmpresas[5].Latitud + "<br>" + "Longitud: " + areaEmpresas[5].Longitud).openPopup();  // Muestra el popup con la información
		});
		empresa6.on('mouseout', function() {
		  empresa6.closePopup();  // Cierra el popup cuando el mouse sale
		});
		}
*/
	
	// Función para dibujar el cuadrado en el mapa
	function dibujarAreasEmpresas(empresas) {
	  empresas.forEach(function(empresa) {
		// Coordenadas de los 4 puntos del cuadrado
		var bounds = [
		  [empresa.Latitud - (empresa.tamaño / 2 / 111320), empresa.Longitud - (empresa.tamaño / 2 / 111320)], // Esquina inferior izquierda
		  [empresa.Latitud + (empresa.tamaño / 2 / 111320), empresa.Longitud + (empresa.tamaño / 2 / 111320)]  // Esquina superior derecha
		];

		// Dibujar el rectángulo en el mapa
		var rectangle = L.rectangle(bounds, {color: "#ff7800", weight: 1, fillOpacity: 0.3});
		rectangle.addTo(map);

		// Opcional: Puedes agregar etiquetas para identificar las empresas
	//	var marker = L.marker([empresa.Latitud, empresa.Longitud]).addTo(map)
	//	  .bindPopup("<b>" + empresa.nombre + "</b>");
	  });
	}	
	
		
	
	function toggleConvexHulls() {
		var btnConvexHulls = document.getElementById("toggle-convex-hulls");
		var subpanelReuso = document.getElementById("subpanel-Reuso");		
		if (convexHullsVisible) {
			btnConvexHulls.classList.remove("active");  // Remover la clase 'active'
			btnConvexHulls.classList.add("nonactive");  // Añadir la clase 'nonactive'
			// Ocultar las envolventes convexas
			convexHullLayers.forEach(function(layer) {
				map.removeLayer(layer);
			});
			convexHullsVisible = false;
			subpanelReuso.style.display = "none"; // Ocultar el subpanel
			
			// Si los marcadores están visibles, eliminarlos del mapa
			for (var nombre in Plantas_pri_sec_cuencaMarkers) {
			  if (Plantas_pri_sec_cuencaMarkers.hasOwnProperty(nombre)) {	  
				map.removeLayer(Plantas_pri_sec_cuencaMarkers[nombre]);
			  }
			}			
			
			
		} else {

			map.flyTo([-38.722215, -62.242012], 12, {
			animate: true,
			duration: 2.0
			}); // Ajusta el nivel de zoom según sea necesario
				
			btnConvexHulls.classList.toggle("active");
			// Mostrar las envolventes convexas
			convexHullLayers = []; // Reiniciar la lista de capas
			//var puntos = [/* tus puntos aquí */]; // Define tus puntos aquí
			//var color = 'blue'; // Puedes definir otro color si deseas

			var hull_cuenca_primera = obtenerConvexHull(puntos_area_primera_cuenca, '#9654e5');
			
			hull_cuenca_primera.on('mouseover', function (e) {
				var popup = L.popup()
					.setLatLng(e.latlng) // Se asegura de que el popup aparece donde el cursor del mouse está sobre el área
					.setContent("<b>Primera Cuenca</b>")
					.openOn(map); // Esto abre el popup en el mapa
			});

			hull_cuenca_primera.on('mouseout', function () {
				map.closePopup(); // Esto cierra el popup al sacar el mouse del área
			});				
			
			convexHullLayers.push(hull_cuenca_primera); // Agregar la capa al array
			
			var hull_cuenca_segunda = obtenerConvexHull(puntos_area_segunda_cuenca, '#007d8e');
			
			hull_cuenca_segunda.on('mouseover', function (e) {
				var popup = L.popup()
					.setLatLng(e.latlng) // Se asegura de que el popup aparece donde el cursor del mouse está sobre el área
					.setContent("<b>Segunda Cuenca</b>")
					.openOn(map); // Esto abre el popup en el mapa
			});

			hull_cuenca_segunda.on('mouseout', function () {
				map.closePopup(); // Esto cierra el popup al sacar el mouse del área
			});	
			
			convexHullLayers.push(hull_cuenca_segunda); // Agregar la capa al array
			
			var hull_cuenca_tercera = obtenerConvexHull(puntos_area_tercera_cuenca, '#152544');
			
			hull_cuenca_tercera.on('mouseover', function (e) {
				var popup = L.popup()
					.setLatLng(e.latlng) // Se asegura de que el popup aparece donde el cursor del mouse está sobre el área
					.setContent("<b>Tercera Cuenca</b>")
					.openOn(map); // Esto abre el popup en el mapa
			});

			hull_cuenca_tercera.on('mouseout', function () {
				map.closePopup(); // Esto cierra el popup al sacar el mouse del área
			});	
			
			convexHullLayers.push(hull_cuenca_tercera); // Agregar la capa al array
			convexHullsVisible = true;
			
			
			
			subpanelReuso.style.display = "block"; // Mostrar el subpanel
			
			// Si los marcadores están ocultos, agregarlos al mapa
			for (var nombre in Plantas_pri_sec_cuencaMarkers) {
			  if (Plantas_pri_sec_cuencaMarkers.hasOwnProperty(nombre)) {
				Plantas_pri_sec_cuencaMarkers[nombre].addTo(map);
			  }
			}			
			// Crear botones para cada marcador en el subpanel
			subpanelReuso.innerHTML = "<h4> Marcadores </h4>"; // Limpiar el contenido existente y agregar el título
			puntos_Plantas_pri_sec_cuenca.forEach(function(punto) {
			  var puntos_Plantas_pri_sec_cuencaButton = document.createElement("button");
			  puntos_Plantas_pri_sec_cuencaButton.classList.add("marker-Button"); // Asignar clase		  
			  puntos_Plantas_pri_sec_cuencaButton.innerHTML = punto.Nombre;
			  puntos_Plantas_pri_sec_cuencaButton.style.display = "block"; // Opcional: mostrar cada botón en una nueva línea
			  puntos_Plantas_pri_sec_cuencaButton.style.marginBottom = "5px"; // Espacio entre los botones
			  puntos_Plantas_pri_sec_cuencaButton.onclick = function() {
				map.flyTo([punto.Latitud, punto.Longitud], 14, {
				animate: true,
				duration: 2.0
				}); // Ajusta el nivel de zoom según sea necesario
			  };
			  subpanelReuso.appendChild(puntos_Plantas_pri_sec_cuencaButton);
			});
		
			// Cambiar el estado de visibilidad
//			Plantas_pri_sec_cuencaVisible = !Plantas_pri_sec_cuencaVisible;
		}
	}		

	

	
	
	function toggleOtrasCuencas() {
	  var btnOtrasCuencas = document.getElementById("toggle-Otras-Cuencas");
	  var subpanelOtrasCuencas = document.getElementById("subpanel-Otras-Cuencas");
	  if (OtrasCuencasmarkersVisible) {
		  btnOtrasCuencas.classList.remove("active");  // Remover la clase 'active'
		  btnOtrasCuencas.classList.add("nonactive");  // Añadir la clase 'nonactive'	
		// Si los marcadores están visibles, eliminarlos del mapa
		for (var nombre in OtrasCuencasMarkers) {
		  if (OtrasCuencasMarkers.hasOwnProperty(nombre)) {	  
			map.removeLayer(OtrasCuencasMarkers[nombre]);
		  }
		}
		subpanelOtrasCuencas.style.display = "none"; // Ocultar el subpanel
	  } else {
	    
		map.flyTo([-38.108628, -65.093994], 7.2, {
		animate: true,
		duration: 2.0
		}); // Ajusta el nivel de zoom según sea necesario	 
		
	    btnOtrasCuencas.classList.toggle("active");
		// Si los marcadores están ocultos, agregarlos al mapa
		for (var nombre in OtrasCuencasMarkers) {
		  if (OtrasCuencasMarkers.hasOwnProperty(nombre)) {
			OtrasCuencasMarkers[nombre].addTo(map);
		  }
		}
		subpanelOtrasCuencas.style.display = "block"; // Mostrar el subpanel

		// Crear botones para cada marcador en el subpanel
		subpanelOtrasCuencas.innerHTML = "<h4> Marcadores </h4>"; // Limpiar el contenido existente y agregar el título
		puntos_Otras_Cuencas.forEach(function(punto) {
		  var OtrasCuencasmarkerButton = document.createElement("button");
		  OtrasCuencasmarkerButton.classList.add("marker-Button"); // Asignar clase		  
		  OtrasCuencasmarkerButton.innerHTML = punto.Nombre;
		  OtrasCuencasmarkerButton.style.display = "block"; // Opcional: mostrar cada botón en una nueva línea
		  OtrasCuencasmarkerButton.style.marginBottom = "5px"; // Espacio entre los botones
		  OtrasCuencasmarkerButton.onclick = function() {
			map.flyTo([punto.Latitud, punto.Longitud], 14, {
			animate: true,
			duration: 2.0
			}); // Ajusta el nivel de zoom según sea necesario
		  };
		  subpanelOtrasCuencas.appendChild(OtrasCuencasmarkerButton);
		});
	
	  }

	  // Cambiar el estado de visibilidad
	  OtrasCuencasmarkersVisible = !OtrasCuencasmarkersVisible;
	
	}
	
	// Función para obtener el Convex Hull
	function obtenerConvexHull(puntos, color) {
		// Usamos el método de Convex Hull de Leaflet
		var hull = L.polygon(puntos).getLatLngs();
		var convexHull = L.polygon(hull, {
			color: color,        // El color es un argumento de entrada
			weight: 2,
			fillOpacity: 0.3
		}).addTo(map);
		return convexHull;
	}
	
	
	
	
	
	// Estado de visibilidad para el subpanel
	var subterraneaVisible = false;

	function toggleAguaSubterranea() {
	  var btnAguaSubterranea = document.getElementById("toggle-Agua-Subterranea");
	  subterraneaVisible = !subterraneaVisible;  // Cambia el estado (visible/invisible)
	  var subpanelAguaSubterranea = document.getElementById("subpanel-Agua-Subterranea");
	  var btnPozos3 = document.getElementById("toggle-Agua-Subterranea-Pozos3");
	  var btnPozos4 = document.getElementById("toggle-Agua-Subterranea-Pozos4");	  
	  var subpanelPozos = document.getElementById("subpanel-Agua-Subterranea-Pozos");
	  var btnEmpresas = document.getElementById("toggle-Agua-Subterranea-Empresas");
	  var subpanelEmpresas = document.getElementById("subpanel-Agua-Subterranea-Empresas");
	  var btnAcuiferos = document.getElementById("toggle-Agua-Subterranea-Acuiferos");
	  var subpanelAcuiferos = document.getElementById("subpanel-Agua-Subterranea-Acuiferos");

	  if (subterraneaVisible) {
	  
		contador1 = 0;
		toggleSubterraneaPozos3()
		contador2 = 0;
		toggleSubterraneaPozos4()
		
		//toggleSubterraneaEmpresas()

		map.flyTo([-38.488532, -61.806507], 13, {
			animate: true,
			duration: 2.0
		}); // Ajusta el nivel de zoom según sea necesario	
	  
	    btnAguaSubterranea.classList.toggle("active");
		
		// Mostrar subpanel y botones asociados
		subpanelAguaSubterranea.style.display = "block";
		btnPozos3.style.display = "block";
		btnPozos3.style.margin = "5px 0";
		btnPozos4.style.display = "block";	
		btnPozos4.style.margin = "5px 0";		
		btnEmpresas.style.display = "none";
		btnAcuiferos.style.display = "none";
	  } else {
	  
		if (Empresas_markersVisible) {
			toggleSubterraneaEmpresas()
		}
		
		if (pozosVisible) {
		    contador1 = 0;
			toggleSubterraneaPozos3()
		}	  

		if (pozosVisible2) {
			contador2 = 0;
			toggleSubterraneaPozos4()
		}
		
	   	btnAguaSubterranea.classList.remove("active");  // Remover la clase 'active'
		btnAguaSubterranea.classList.add("nonactive");  // Añadir la clase 'nonactive'
		
		// Ocultar subpanel y botones asociados
		subpanelAguaSubterranea.style.display = "none";
		btnPozos3.style.display = "none";
		btnPozos4.style.display = "none";		
		btnEmpresas.style.display = "none";
		btnAcuiferos.style.display = "none";
		
		// Ocultar cualquier subpanel secundario asociado
		subpanelPozos.style.display = "none";
		subpanelEmpresas.style.display = "none";
		subpanelAcuiferos.style.display = "none";
	  }
	}	

	
	
    // Asignar la función de descarga al botón
//    document.getElementById("download-button").onclick = downloadCSV;

	// Llamar a la función para dibujar el área de Profertil
	//dibujarAreasEmpresas(areaEmpresas);

	// Llamamos a la función pasando los puntos y añadiendo el Convex Hull al mapa
//	obtenerConvexHull(puntos_area_tercera_cuenca,'red');
//	obtenerConvexHull(puntos_area_primera_cuenca,'green');
//	obtenerConvexHull(puntos_area_segunda_cuenca,'blue');
	

    // Control de capas (para cambiar entre mapas base)
    var baseMaps = {
      "Mapa Estándar": esriStandard,
      "Satélite": esriSatellite,
      "Mapa Topográfico": esriTopographic,
	  "OpenStreetMap": openStreetMap,  
	  "hotOSM" : hotOSM
    };

    L.control.layers(baseMaps).addTo(map);
	
  </script>

</body>
</html>
